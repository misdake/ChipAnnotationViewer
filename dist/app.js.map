{"version":3,"file":"app.js","sources":["../ts/util/ScreenRect.ts","../ts/Renderer.ts","../ts/util/Transform.ts","../ts/Camera.ts","../ts/data/Data.ts","../ts/util/Color.ts","../ts/util/Ui.ts","../ts/Canvas.ts","../ts/util/NetUtil.ts","../ts/Layer.ts","../ts/drawable/Drawable.ts","../ts/drawable/DrawableImage.ts","../ts/MouseListener.ts","../ts/layers/Selection.ts","../ts/layers/Names.ts","../ts/layers/LayerImage.ts","../ts/util/AABB.ts","../ts/drawable/DrawablePolyline.ts","../ts/layers/LayerPolylineView.ts","../ts/layers/LayerPolylineEdit.ts","../ts/drawable/DrawableText.ts","../ts/layers/LayerTextEdit.ts","../ts/layers/LayerTextView.ts","../ts/util/GithubUtil.ts","../ts/util/Size.ts","../ts/layers/LayerPolylineCreate.ts","../ts/layers/LayerTextCreate.ts","../ts/App.ts"],"sourcesContent":["export class ScreenRect {\n    public readonly left: number;\n    public readonly top: number;\n    public readonly width: number;\n    public readonly height: number;\n\n    public constructor(left: number, top: number, width: number, height: number) {\n        this.left = left;\n        this.top = top;\n        this.width = width;\n        this.height = height;\n    }\n}","import {Canvas} from \"./Canvas\";\nimport {Camera} from \"./Camera\";\nimport {Transform} from \"./util/Transform\";\nimport {Size} from \"./util/Size\";\nimport {ScreenRect} from \"./util/ScreenRect\";\nimport {Point} from \"./drawable/DrawablePolyline\";\n\nexport class Renderer {\n    private canvas: Canvas;\n    private canvasElement: HTMLCanvasElement;\n    private context: CanvasRenderingContext2D;\n\n    public constructor(canvas: Canvas, canvasElement: HTMLCanvasElement, context: CanvasRenderingContext2D) {\n        this.canvas = canvas;\n        this.canvasElement = canvasElement;\n        this.context = context;\n    }\n\n    public clear(): void {\n        this.context.fillStyle = \"#000000\";\n        this.context.fillRect(0, 0, this.canvasElement.width, this.canvasElement.height);\n    }\n\n    public setColor(color: string) {\n        this.context.fillStyle = color;\n        this.context.strokeStyle = color;\n    }\n    public setFillColor(color: string) {\n        this.context.fillStyle = color;\n    }\n    public setStrokeColor(color: string) {\n        this.context.strokeStyle = color;\n    }\n\n    public calculateLineWidth(camera: Camera, lineWidth?: Size): number {\n        if (!lineWidth) return 1;\n        let onScreen = lineWidth.onScreen;\n        let onCanvas = camera.canvasSizeToScreen(lineWidth.onCanvas);\n        let ofScreenSize = lineWidth.ofScreen * Math.min(this.canvasElement.width, this.canvasElement.height);\n        return onScreen + onCanvas + ofScreenSize;\n    }\n\n\n    //---------------------------------------------\n    //polyline\n\n    public renderPolyline(camera: Camera, points: Point[], closed: boolean, fill: boolean, stroke: boolean, lineWidth?: Size) {\n        if (points.length == 0) return;\n\n        this.context.lineWidth = this.calculateLineWidth(camera, lineWidth);\n        this.context.beginPath();\n        this.context.lineCap = \"round\";\n        this.context.lineJoin = \"round\";\n\n        let start = camera.canvasToScreen(points[0].x, points[0].y);\n        this.context.moveTo(start.x, start.y);\n        for (let i = 1; i < points.length; i++) {\n            let point = camera.canvasToScreen(points[i].x, points[i].y);\n            this.context.lineTo(point.x, point.y);\n        }\n        if (closed) {\n            this.context.closePath();\n        }\n\n        if (fill) {\n            this.context.fill();\n        }\n        if (stroke) {\n            this.context.stroke();\n        }\n    }\n\n    //polyline\n    //---------------------------------------------\n\n\n    //---------------------------------------------\n    //image\n\n    public testImageVisibility(camera: Camera, image: HTMLImageElement, transform: Transform, width: number, height: number, range: number): ScreenRect {\n        //transform to screen space\n        let point = camera.canvasToScreen(transform.position.x, transform.position.y);\n        let targetW = camera.canvasSizeToScreen(width);\n        let targetH = camera.canvasSizeToScreen(height);\n\n        //skip out-of-screen images\n        if (point.x - range > this.canvas.getWidth() || point.y - range > this.canvas.getHeight()) return null;\n        if (point.x + targetW + range < 0 || point.y + targetH + range < 0) return null;\n\n        return new ScreenRect(point.x, point.y, targetW, targetH);\n    }\n\n    public renderImage(camera: Camera, image: HTMLImageElement, transform: Transform, width: number, height: number) {\n        let rect = this.testImageVisibility(camera, image, transform, width, height, 0);\n        this.drawImage(image, rect);\n    }\n\n    public drawImage(image: HTMLImageElement, rect: ScreenRect) {\n        if (rect) {\n            //actually render image\n            this.context.drawImage(image, rect.left, rect.top, rect.width, rect.height);\n        }\n    }\n\n    //image\n    //---------------------------------------------\n\n\n    //---------------------------------------------\n    //shape\n\n    public renderCircle(camera: Camera, x: number, y: number, radius: number, fill: boolean, stroke: boolean, lineWidth?: Size) {\n        let position = camera.canvasToScreen(x, y);\n        let size = camera.canvasSizeToScreen(radius);\n        this.drawCircle(position.x, position.y, size, fill, stroke);\n        this.context.lineWidth = this.calculateLineWidth(camera, lineWidth);\n    }\n\n    public drawCircle(x: number, y: number, radius: number, fill: boolean, stroke: boolean, lineWidth?: number) {\n        if (lineWidth) this.context.lineWidth = lineWidth;\n\n        this.context.beginPath();\n        this.context.arc(x, y, radius, 0, Math.PI * 2);\n        this.context.closePath();\n\n        if (fill) {\n            this.context.fill();\n        }\n        if (stroke) {\n            this.context.stroke();\n        }\n    }\n\n    public drawRect(x1: number, y1: number, x2: number, y2: number, fill: boolean, stroke: boolean, lineWidth?: number) {\n        if (lineWidth) this.context.lineWidth = lineWidth;\n\n        this.context.beginPath();\n        this.context.moveTo(x1, y1);\n        this.context.lineTo(x1, y2);\n        this.context.lineTo(x2, y2);\n        this.context.lineTo(x2, y1);\n        this.context.closePath();\n\n        if (fill) {\n            this.context.fill();\n        }\n        if (stroke) {\n            this.context.stroke();\n        }\n    }\n\n    //shape\n    //---------------------------------------------\n\n\n    //---------------------------------------------\n    //text\n\n    public measureText(camera: Camera, text: string, fontSize: Size) {\n        let size = this.calculateLineWidth(camera, fontSize);\n        this.context.font = size + \"px Arial\";\n        let textMetrics = this.context.measureText(text);\n        return [textMetrics.width, size];\n    }\n\n    public renderText(camera: Camera, text: string, fontSize: number, x: number, y: number, anchorX: CanvasTextAlign, anchorY: CanvasTextBaseline) {\n        let position = camera.canvasToScreen(x, y);\n        this.drawText(text, fontSize, position.x, position.y, anchorX, anchorY);\n    }\n\n    public drawText(text: string, fontSize: number, x: number, y: number, anchorX: CanvasTextAlign, anchorY: CanvasTextBaseline) {\n        this.context.textAlign = anchorX;\n        this.context.textBaseline = anchorY;\n        this.context.font = fontSize + \"px Arial\";\n        this.context.fillText(text, x, y);\n    }\n\n    //text\n    //---------------------------------------------\n}\n","export class Transform {\n    public readonly position: Position = new Position(0, 0);\n}\n\nexport class Position {\n    public x: number;\n    public y: number;\n\n    public constructor(x: number, y: number) {\n        this.x = x;\n        this.y = y;\n    }\n}","import {Map} from \"./data/Map\";\nimport {Canvas} from \"./Canvas\";\nimport {Position} from \"./util/Transform\";\nimport {AABB} from \"./util/AABB\";\n\nexport class Camera {\n    private canvas: Canvas;\n\n    private zoom: number;\n    private zoomMin: number;\n    private zoomMax: number;\n\n    private position: Position = new Position(0, 0);\n\n    private xMin: number;\n    private xMax: number;\n    private yMin: number;\n    private yMax: number;\n\n    public constructor() {\n    }\n\n    public load(canvas: Canvas, map: Map) {\n        this.canvas = canvas;\n        this.zoomMin = 0;\n        this.zoomMax = map.maxLevel;\n        this.zoom = map.maxLevel;\n        this.checkZoom();\n\n        this.position.x = map.width / 2;\n        this.position.y = map.height / 2;\n        this.xMin = 0;\n        this.xMax = map.width;\n        this.yMin = 0;\n        this.yMax = map.height;\n    }\n    public moveXy(dx: number, dy: number) {\n        this.position.x += dx;\n        this.position.y += dy;\n        this.checkXy();\n    }\n    private checkXy() {\n        this.position.x = Math.min(Math.max(this.position.x, this.xMin), this.xMax);\n        this.position.y = Math.min(Math.max(this.position.y, this.yMin), this.yMax);\n    }\n\n    public getZoom(): number {\n        return this.zoom;\n    }\n    public changeZoomBy(amount: number) {\n        this.zoom += amount;\n        this.checkZoom();\n    }\n    public setZoomTo(zoom: number) {\n        this.zoom = zoom;\n        this.checkZoom();\n    }\n    private checkZoom() {\n        this.zoom = Math.min(Math.max(this.zoom, this.zoomMin), this.zoomMax);\n    }\n\n\n    private scale: number;\n    private tx: number;\n    private ty: number;\n\n    public action() {\n        if (!this.canvas) return;\n        this.checkXy();\n        this.checkZoom();\n\n        let scale = 1.0 / (1 << this.zoom);\n        this.scale = scale;\n        this.tx = this.canvas.getWidth() / 2 - this.position.x * scale;\n        this.ty = this.canvas.getHeight() / 2 - this.position.y * scale;\n    }\n\n    public screenXyToCanvas(x: number, y: number): Position {\n        let targetX = (x - this.tx) / this.scale;\n        let targetY = (y - this.ty) / this.scale;\n        return new Position(targetX, targetY);\n    }\n    public canvasToScreen(x: number, y: number): Position {\n        let targetX = x * this.scale + this.tx;\n        let targetY = y * this.scale + this.ty;\n        return new Position(targetX, targetY);\n    }\n    public screenSizeToCanvas(s: number): number {\n        return s / this.scale;\n    }\n    public canvasSizeToScreen(s: number): number {\n        return s * this.scale;\n    }\n\n    public canvasAABBInScreen(aabb: AABB): boolean {\n        let x1 = aabb.x1 * this.scale + this.tx;\n        let y1 = aabb.y1 * this.scale + this.ty;\n        let x2 = aabb.x2 * this.scale + this.tx;\n        let y2 = aabb.y2 * this.scale + this.ty;\n\n        let w = this.canvas.getWidth();\n        let h = this.canvas.getHeight();\n        return !(x2 < 0 || x1 > w || y2 < 0 || y1 > h);\n    }\n}\n","import {DrawablePolylinePack} from \"../drawable/DrawablePolyline\";\nimport {DrawableTextPack} from \"../drawable/DrawableText\";\n\nexport class Data {\n    title: string;\n    polylines: DrawablePolylinePack[];\n    texts: DrawableTextPack[];\n}","export class ColorEntry {\n    public constructor(public name: string, public r: number, public g: number, public b: number) {\n    }\n\n    public static findByName(name: string): ColorEntry {\n        for (const colorValue of this.list) {\n            if (name == colorValue.name) {\n                return colorValue;\n            }\n        }\n        return this.list[0];\n    }\n\n    public static list = [\n        new ColorEntry(\"red\", 255, 0, 0),\n        new ColorEntry(\"green\", 0, 255, 0),\n        new ColorEntry(\"blue\", 0, 0, 255),\n        new ColorEntry(\"cyan\", 0, 255, 255),\n        new ColorEntry(\"purple\", 255, 0, 255),\n        new ColorEntry(\"yellow\", 255, 255, 0),\n        new ColorEntry(\"gray\", 127, 127, 127),\n        new ColorEntry(\"white\", 255, 255, 255),\n    ];\n}\n\nexport class AlphaEntry {\n    public constructor(public name: string, public buttonColor: string, public value: number) {\n    }\n\n    public static findByName(name: string): AlphaEntry {\n        for (const alphaValue of this.list) {\n            if (name == alphaValue.name) {\n                return alphaValue;\n            }\n        }\n        return this.list[0];\n    }\n    public static findByValue(value: number): AlphaEntry {\n        for (const alphaValue of this.list) {\n            if (value == alphaValue.value) {\n                return alphaValue;\n            }\n        }\n        return this.list[0];\n    }\n\n    public static list = [\n        new AlphaEntry(\"25\", \"rgb(191,191,191)\", 0.25),\n        new AlphaEntry(\"50\", \"rgb(127,127,127)\", 0.50),\n        new AlphaEntry(\"75\", \"rgb(63,63,63)\", 0.75),\n        new AlphaEntry(\"100\", \"rgb(0,0,0)\", 1.00),\n    ];\n}\n\nexport function combineColorAlpha(color: ColorEntry, alpha: AlphaEntry): string {\n    return \"rgba(\" + color.r + \",\" + color.g + \",\" + color.b + \",\" + alpha.value + \")\";\n}\n","import {AlphaEntry, ColorEntry} from \"./Color\";\n\nexport class Ui {\n\n    static isMobile() {\n        return (/Mobi|Android/i.test(navigator.userAgent));\n    }\n\n    static copyToClipboard(inputId: string) {\n        let input = document.getElementById(inputId) as HTMLInputElement;\n        input.select();\n        document.execCommand(\"Copy\");\n        input.blur();\n    }\n\n    static setContent(id: string, content: string) {\n        let element = document.getElementById(id);\n        element.innerHTML = content;\n    }\n\n    static bindButtonOnClick(id: string, onclick: () => void) {\n        let button: HTMLButtonElement = <HTMLButtonElement>document.getElementById(id);\n        button.onclick = onclick;\n    }\n\n    static setVisibility(id: string, visible: boolean, displayProperty: string = \"block\") {\n        let element: HTMLElement = document.getElementById(id);\n        element.style.display = visible ? displayProperty : \"none\";\n    }\n\n    static bindCheckbox(id: string, initialValue: boolean, onchange: (newValue: boolean) => void) {\n        let checkbox = <HTMLInputElement>document.getElementById(id);\n        checkbox.checked = initialValue;\n        checkbox.onchange = ev => {\n            onchange(checkbox.checked);\n        };\n    }\n\n    static bindSelect(id: string, options: string[], initialValue: string, onchange: (index: number, newValue: string) => void) {\n        let select = <HTMLSelectElement>document.getElementById(id);\n        select.options.length = 0;\n        for (let map of options) {\n            select.add(new Option(map, map));\n        }\n\n        let index = options.indexOf(initialValue);\n        if (index > 0) {\n            select.options[index].selected = true;\n        }\n        select.onchange = ev => {\n            onchange(select.selectedIndex, select.options[select.selectedIndex].value);\n        };\n    }\n\n    static bindValue(id: string, initialValue: string, onchange: (newValue: string) => void) {\n        let element = <HTMLInputElement>document.getElementById(id);\n        element.value = initialValue;\n        element.oninput = element.onchange = ev => {\n            onchange(element.value);\n        };\n    }\n\n    static bindColor(colorContainerId: string, alphaContainerId: string, initialColor: ColorEntry, initialAlpha: AlphaEntry, onchange: (newColor: ColorEntry, newAlpha: AlphaEntry) => void) {\n        let colorContainer = <HTMLInputElement>document.getElementById(colorContainerId);\n        let alphaContainer = <HTMLInputElement>document.getElementById(alphaContainerId);\n        colorContainer.innerHTML = \"\";\n        alphaContainer.innerHTML = \"\";\n\n        let thisColor = initialColor;\n        let thisAlpha = initialAlpha;\n\n        for (const colorValue of ColorEntry.list) {\n            let id = colorContainerId + \"_\" + colorValue.name;\n            let style = \"background:\" + colorValue.name;\n            colorContainer.innerHTML = colorContainer.innerHTML + \"<button id=\\\"\" + id + \"\\\" class=\\\"configColorButton\\\" style=\\\"\" + style + \"\\\"></button>\\n\";\n        }\n        for (const alphaValue of AlphaEntry.list) {\n            let id = alphaContainerId + \"_\" + alphaValue.name;\n            let style = \"background:\" + alphaValue.buttonColor;\n            alphaContainer.innerHTML = alphaContainer.innerHTML + \"<button id=\\\"\" + id + \"\\\" class=\\\"configAlphaButton\\\" style=\\\"\" + style + \"\\\"></button>\\n\";\n        }\n\n        for (const colorValue of ColorEntry.list) {\n            let id = colorContainerId + \"_\" + colorValue.name;\n            let button: HTMLButtonElement = <HTMLButtonElement>document.getElementById(id);\n            button.onclick = ev => {\n                thisColor = colorValue;\n                onchange(thisColor, thisAlpha);\n            };\n        }\n        for (const alphaValue of AlphaEntry.list) {\n            let id = alphaContainerId + \"_\" + alphaValue.name;\n            let button: HTMLButtonElement = <HTMLButtonElement>document.getElementById(id);\n            button.onclick = ev => {\n                thisAlpha = alphaValue;\n                onchange(thisColor, thisAlpha);\n            };\n        }\n    }\n\n    static bindNumber(id: string, initialValue: number, onchange: (newValue: number) => void) {\n        let input = <HTMLInputElement>document.getElementById(id);\n        input.value = initialValue.toString();\n        input.oninput = input.onchange = ev => {\n            let result = parseFloat(input.value);\n            if (result >= 0) {\n                onchange(result);\n            } else {\n                input.value = \"0\";\n                onchange(0);\n            }\n        };\n    }\n\n}\n","import {Layer} from \"./Layer\";\nimport {Map} from \"./data/Map\";\nimport {Renderer} from \"./Renderer\";\nimport {Camera} from \"./Camera\";\nimport {Data} from \"./data/Data\";\nimport {Ui} from \"./util/Ui\";\n\nexport class Canvas {\n    private readonly domElement: HTMLElement;\n    private readonly canvasElement: HTMLCanvasElement;\n    private readonly context: CanvasRenderingContext2D;\n    private readonly renderer: Renderer;\n    private readonly camera: Camera;\n\n    private width: number;\n    private height: number;\n\n    public constructor(domElement: HTMLElement, id: string) {\n        this.domElement = domElement;\n        this.domElement.innerHTML += \"<canvas id=\\\"\" + id + \"\\\" style='width:100%;height:100%;overflow:hidden'></canvas>\";\n\n        this.domElement.oncontextmenu = function (ev) {\n            return false; //disable context menu\n        };\n\n        this.canvasElement = document.getElementById(id) as HTMLCanvasElement;\n        this.context = this.canvasElement.getContext(\"2d\");\n        this.camera = new Camera();\n        this.renderer = new Renderer(this, this.canvasElement, this.context);\n\n        this.width = this.canvasElement.clientWidth;\n        this.height = this.canvasElement.clientHeight;\n\n        let self = this;\n        window.addEventListener('resize', function () {\n            self.requestRender();\n        })\n    }\n\n    public getCamera(): Camera {\n        return this.camera;\n    }\n\n    public init(): void {\n        this.layers = [];\n\n        this.canvasElement.onclick = event => {\n            event.preventDefault();\n            event.stopPropagation();\n            event.stopImmediatePropagation();\n            let length = this.layers.length;\n            for (let i = length - 1; i >= 0; i--) {\n                let layer = this.layers[i];\n                if (layer.mouseListener && layer.mouseListener.onclick(event)) break;\n            }\n        };\n        this.canvasElement.ondblclick = event => {\n            event.preventDefault();\n            event.stopPropagation();\n            event.stopImmediatePropagation();\n            let length = this.layers.length;\n            for (let i = length - 1; i >= 0; i--) {\n                let layer = this.layers[i];\n                if (layer.mouseListener && layer.mouseListener.ondblclick(event)) break;\n            }\n        };\n        this.canvasElement.onwheel = event => {\n            event.preventDefault();\n            event.stopPropagation();\n            event.stopImmediatePropagation();\n            let length = this.layers.length;\n            for (let i = length - 1; i >= 0; i--) {\n                let layer = this.layers[i];\n                if (layer.mouseListener && layer.mouseListener.onwheel(event)) break;\n            }\n        };\n        this.canvasElement.onmousedown = event => {\n            event.preventDefault();\n            event.stopPropagation();\n            event.stopImmediatePropagation();\n            let length = this.layers.length;\n            for (let i = length - 1; i >= 0; i--) {\n                let layer = this.layers[i];\n                if (layer.mouseListener && layer.mouseListener.onmousedown(event)) break;\n            }\n        };\n        this.canvasElement.onmouseup = event => {\n            event.preventDefault();\n            event.stopPropagation();\n            event.stopImmediatePropagation();\n            let length = this.layers.length;\n            for (let i = length - 1; i >= 0; i--) {\n                let layer = this.layers[i];\n                if (layer.mouseListener && layer.mouseListener.onmouseup(event)) break;\n            }\n        };\n        this.canvasElement.onmousemove = event => {\n            event.preventDefault();\n            event.stopPropagation();\n            event.stopImmediatePropagation();\n            let length = this.layers.length;\n            for (let i = length - 1; i >= 0; i--) {\n                let layer = this.layers[i];\n                if (layer.mouseListener && layer.mouseListener.onmousemove(event)) break;\n            }\n        };\n        this.canvasElement.onmouseout = event => {\n            event.preventDefault();\n            event.stopPropagation();\n            event.stopImmediatePropagation();\n            let length = this.layers.length;\n            for (let i = length - 1; i >= 0; i--) {\n                let layer = this.layers[i];\n                if (layer.mouseListener && layer.mouseListener.onmouseout(event)) break;\n            }\n        };\n\n        this.canvasElement.onkeydown = event => {\n            event.preventDefault();\n            event.stopPropagation();\n            event.stopImmediatePropagation();\n            let length = this.layers.length;\n            for (let i = length - 1; i >= 0; i--) {\n                let layer = this.layers[i];\n                if (layer.keyboardListener && layer.keyboardListener.onkeydown(event)) break;\n            }\n        };\n        this.canvasElement.onkeyup = event => {\n            event.preventDefault();\n            event.stopPropagation();\n            event.stopImmediatePropagation();\n            let length = this.layers.length;\n            for (let i = length - 1; i >= 0; i--) {\n                let layer = this.layers[i];\n                if (layer.keyboardListener && layer.keyboardListener.onkeyup(event)) break;\n            }\n        };\n        this.canvasElement.onkeypress = event => {\n            event.preventDefault();\n            event.stopPropagation();\n            event.stopImmediatePropagation();\n            let length = this.layers.length;\n            for (let i = length - 1; i >= 0; i--) {\n                let layer = this.layers[i];\n                if (layer.keyboardListener && layer.keyboardListener.onkeypress(event)) break;\n            }\n        };\n\n        if (Ui.isMobile()) {\n            let hammer = new Hammer(this.canvasElement);\n            hammer.get('pan').set({ direction: Hammer.DIRECTION_ALL });\n            hammer.on(\"pan\", (event: HammerInput) => {\n                event.preventDefault();\n                let length = this.layers.length;\n                for (let i = length - 1; i >= 0; i--) {\n                    let layer = this.layers[i];\n                    if (layer.mouseListener && layer.mouseListener.onpan(event)) break;\n                }\n            });\n        }\n    }\n\n    private layers: Layer[];\n\n    public addLayer(layer: Layer): void {\n        this.layers.push(layer);\n    }\n\n    public findLayer(name: string): Layer {\n        for (const layer of this.layers) {\n            if (layer.name == name) {\n                return layer;\n            }\n        }\n        return null;\n    }\n\n    public getWidth(): number {\n        return this.width;\n    }\n\n    public getHeight(): number {\n        return this.height;\n    }\n\n    private renderNext = false;\n    public requestRender(): void {\n        if (this.renderNext) return;\n        this.renderNext = true;\n        let self = this;\n        requestAnimationFrame(function () {\n            self.renderNext = false;\n            self.render();\n        })\n    }\n\n    private map: Map = null;\n    private data: Data = null;\n    public loadMap(map: Map): void {\n        if (!this.map || this.map.name != map.name) {\n            this.camera.load(this, map);\n            for (let layer of this.layers) {\n                layer.loadMap(map);\n            }\n        }\n        this.map = map;\n    }\n    public loadData(data: Data): void {\n        if (this.data != data) {\n            for (let layer of this.layers) {\n                layer.loadData(data);\n            }\n        }\n        this.data = data;\n    }\n\n    public save(): Data {\n        let data = new Data();\n        for (let layer of this.layers) {\n            layer.saveData(data);\n        }\n        return data;\n    }\n\n    public render(): void {\n        this.width = this.canvasElement.clientWidth;\n        this.height = this.canvasElement.clientHeight;\n        if (this.canvasElement.width !== this.width) this.canvasElement.width = this.width;\n        if (this.canvasElement.height !== this.height) this.canvasElement.height = this.height;\n\n        this.camera.action();\n\n        this.renderer.clear();\n        for (let layer of this.layers) {\n            layer.render(this.renderer);\n        }\n    }\n}\n","export class NetUtil {\n    public static get(url: string, callback: (text: string) => void) {\n        let request = new XMLHttpRequest();\n        request.onreadystatechange = function () {\n            if (request.readyState == 4 && request.status == 200) {\n                callback(request.responseText);\n            }\n        };\n        request.open(\"GET\", url, true);\n        request.send();\n    }\n}\n","import {Map} from \"./data/Map\";\nimport {Canvas} from \"./Canvas\";\nimport {Camera} from \"./Camera\";\nimport {Renderer} from \"./Renderer\";\nimport {MouseListener} from \"./MouseListener\";\nimport {KeyboardListener} from \"./KeyboardListener\";\nimport {Data} from \"./data/Data\";\n\nexport class Layer {\n\n    public readonly name: string;\n\n    protected readonly canvas: Canvas;\n    protected readonly camera: Camera;\n\n    protected _mouseListener?: MouseListener = null;\n    protected _keyboardListener?: KeyboardListener = null;\n    get mouseListener(): MouseListener {\n        return this._mouseListener;\n    }\n    get keyboardListener(): KeyboardListener {\n        return this._keyboardListener;\n    }\n\n    public constructor(name: string, canvas: Canvas) {\n        this.name = name;\n        this.canvas = canvas;\n        this.camera = canvas.getCamera();\n    }\n\n    public loadMap(map: Map): void {\n\n    }\n\n    public loadData(data: Data): void {\n\n    }\n\n    public saveData(data: Data): void {\n\n    }\n\n    public render(renderer: Renderer): void {\n\n    }\n\n    public unload(): void {\n\n    }\n}\n","import {Canvas} from \"../Canvas\";\nimport {Camera} from \"../Camera\";\nimport {Renderer} from \"../Renderer\";\nimport {Transform} from \"../util/Transform\";\n\nexport class Drawable {\n\n    public constructor() {\n    }\n\n    public readonly transformation: Transform = new Transform();\n\n    public render(canvas: Canvas, renderer: Renderer, camera: Camera): void {\n    }\n\n}","import {Drawable} from \"./Drawable\";\nimport {Canvas} from \"../Canvas\";\nimport {Renderer} from \"../Renderer\";\nimport {Camera} from \"../Camera\";\n\nexport class DrawableImage extends Drawable {\n\n    private readonly img: HTMLImageElement;\n\n    private readonly w: number;\n    private readonly h: number;\n\n    private readonly src: string;\n    private loading: boolean;\n    private loaded: boolean;\n\n    public constructor(src: string, x: number, y: number, w: number, h: number, onload: (image: DrawableImage) => void) {\n        super();\n        this.transformation.position.x = x;\n        this.transformation.position.y = y;\n        this.w = w;\n        this.h = h;\n        this.img = new Image();\n        // img.src is not set, will be set and image will start loading once it is visible to camera.\n\n        this.src = src;\n        this.loaded = false;\n\n        let self = this;\n        this.img.onload = ev => {\n            this.loaded = true;\n            if (onload) onload(self);\n        }\n    }\n\n    private loadIfNotLoaded() {\n        if (!this.loading) {\n            this.loading = true;\n            this.img.src = this.src;\n        }\n    }\n\n    public render(canvas: Canvas, renderer: Renderer, camera: Camera): void {\n        let rect = renderer.testImageVisibility(camera, this.img, this.transformation, this.w, this.h, 100);\n        if (rect) {\n            this.loadIfNotLoaded();\n            if (this.loaded) {\n                renderer.drawImage(this.img, rect);\n            }\n        }\n    }\n\n}","export class MouseListener {\n    public onclick(event: MouseEvent): boolean {\n        return false;\n    }\n    public ondblclick(event: MouseEvent): boolean {\n        return false;\n    }\n\n    public onwheel(event: WheelEvent): boolean {\n        return false;\n    }\n\n    public onmousedown(event: MouseEvent): boolean {\n        return false;\n    }\n    public onmouseup(event: MouseEvent): boolean {\n        return false;\n    }\n    public onmousemove(event: MouseEvent): boolean {\n        return false;\n    }\n    public onmouseout(event: MouseEvent): boolean {\n        return false;\n    }\n    public onpan(event: HammerInput): boolean {\n        return false;\n    }\n}\n","import {Drawable} from \"../drawable/Drawable\";\n\nexport class Selection {\n\n    private static listDeselect: (() => void)[] = [];\n    private static mapSelect: { [key: string]: ((item: Drawable) => void)[] } = {};\n    private static mapDeselect: { [key: string]: (() => void)[] } = {};\n\n    private static selected: Drawable;\n    private static selectedType: string;\n\n    public static register(typeName: string, onselect: (item: Drawable) => void, ondeselect: () => void) {\n        if (typeName) {\n            if (onselect) {\n                this.mapSelect[typeName] = this.mapSelect[typeName] || [];\n                this.mapSelect[typeName].push(onselect);\n            }\n            if (ondeselect) {\n                this.mapDeselect[typeName] = this.mapDeselect[typeName] || [];\n                this.mapDeselect[typeName].push(ondeselect);\n            }\n        } else {\n            this.listDeselect.push(ondeselect);\n        }\n    }\n\n    public static deselectAny() {\n        if (this.selected) {\n            this.deselect(this.selectedType);\n        }\n    }\n\n    public static deselect(typeName: string) {\n        if (this.selectedType == typeName) {\n            let ondeselect = this.mapDeselect[typeName];\n            if (ondeselect) {\n                for (let func of ondeselect) {\n                    func();\n                }\n            }\n            for (let func of this.listDeselect) {\n                func();\n            }\n\n            this.selectedType = null;\n            this.selected = null;\n        }\n    }\n    public static select(typeName: string, item: Drawable) {\n        this.deselectAny();\n        this.selected = item;\n        this.selectedType = typeName;\n        let onselect = this.mapSelect[typeName];\n        if (onselect) {\n            for (let func of onselect) {\n                func(item);\n            }\n        }\n    }\n\n}\n","export class Names {\n    static readonly IMAGE = \"image\";\n    static readonly POLYLINE_CREATE = \"polyline_create\";\n    static readonly POLYLINE_EDIT = \"polyline_edit\";\n    static readonly POLYLINE_VIEW = \"polyline_view\";\n    static readonly TEXT_CREATE = \"text_create\";\n    static readonly TEXT_EDIT = \"text_edit\";\n    static readonly TEXT_VIEW = \"text_view\";\n}\n","import {Layer} from \"../Layer\";\nimport {Camera} from \"../Camera\";\nimport {Canvas} from \"../Canvas\";\nimport {Map} from \"../data/Map\";\nimport {Renderer} from \"../Renderer\";\nimport {DrawableImage} from \"../drawable/DrawableImage\";\nimport {MouseListener} from \"../MouseListener\";\nimport {Ui} from \"../util/Ui\";\nimport {Selection} from \"./Selection\";\nimport {Names} from \"./Names\";\n\nexport class LayerImage extends Layer {\n\n    private static readonly HINT_ELEMENT_ID = \"hint\";\n    private static readonly HINT_VIEW =\n        \"1. hold mouse button to drag<br>\" +\n        \"2. left click polygon/text to select<br>\" +\n        \"3. mouse wheel to zoom<br>\";\n\n    private map: Map;\n    private maxLevel: number;\n    private baseFolder: string;\n\n    public constructor(canvas: Canvas) {\n        super(Names.IMAGE, canvas);\n        Selection.register(null, null, () => {\n            Ui.setContent(LayerImage.HINT_ELEMENT_ID, LayerImage.HINT_VIEW);\n        });\n        Ui.setContent(LayerImage.HINT_ELEMENT_ID, LayerImage.HINT_VIEW);\n    }\n\n    public loadMap(map: Map): void {\n        this.map = map;\n        this.maxLevel = map.maxLevel;\n\n        let split = map.githubRepo.indexOf('/');\n        let username = map.githubRepo.substring(0, split);\n        let repo = map.githubRepo.substring(split + 1);\n        this.baseFolder = `https://${username}.github.io/${repo}/` + this.map.name;\n        this.currentZoom = -1;\n\n        let imageSource = document.getElementById(\"imageSource\") as HTMLLinkElement;\n        Ui.setVisibility(\"imageSource\", !!map.source, \"inline\");\n        if (map.source) {\n            imageSource.href = map.source;\n            imageSource.innerHTML = map.source;\n        }\n\n        Ui.bindButtonOnClick(\"buttonZoomIn\", () => {\n            this.camera.changeZoomBy(-1);\n            this.camera.action();\n            this.canvas.requestRender();\n        });\n        Ui.bindButtonOnClick(\"buttonZoomOut\", () => {\n            this.camera.changeZoomBy(1);\n            this.camera.action();\n            this.canvas.requestRender();\n        });\n\n        let self = this;\n        this._mouseListener = new class extends MouseListener {\n            private down = false;\n            private lastX = -1;\n            private lastY = -1;\n            onwheel(event: WheelEvent): boolean {\n                let camera = self.canvas.getCamera();\n                camera.action();\n                let point1 = camera.screenXyToCanvas(event.offsetX, event.offsetY);\n                camera.changeZoomBy(event.deltaY > 0 ? 1 : -1);\n                camera.action();\n                let point2 = camera.screenXyToCanvas(event.offsetX, event.offsetY);\n                let dx = point1.x - point2.x;\n                let dy = point1.y - point2.y;\n                camera.moveXy(dx, dy);\n                self.canvas.requestRender();\n                return true;\n            }\n            onmousedown(event: MouseEvent): boolean {\n                this.down = true;\n                this.lastX = event.offsetX;\n                this.lastY = event.offsetY;\n                return true;\n            }\n            onmouseup(event: MouseEvent): boolean {\n                this.down = false;\n                return true;\n            }\n            onmousemove(event: MouseEvent): boolean {\n                if (this.down && event.buttons > 0) {\n                    let camera = self.canvas.getCamera();\n                    camera.action();\n                    let point1 = camera.screenXyToCanvas(this.lastX, this.lastY);\n                    let point2 = camera.screenXyToCanvas(event.offsetX, event.offsetY);\n                    let dx = point1.x - point2.x;\n                    let dy = point1.y - point2.y;\n                    camera.moveXy(dx, dy);\n                    this.lastX = event.offsetX;\n                    this.lastY = event.offsetY;\n                    self.canvas.requestRender();\n                    return true;\n                } else {\n                    return false;\n                }\n            }\n            onpan(event: HammerInput): boolean {\n                let dx = event.deltaX - this.lastX;\n                let dy = event.deltaY - this.lastY;\n                let camera = self.canvas.getCamera();\n                let scale = camera.screenSizeToCanvas(1);\n                camera.moveXy(-dx * scale, -dy * scale);\n                self.canvas.requestRender();\n                this.lastX = event.deltaX;\n                this.lastY = event.deltaY;\n                if (event.isFinal) {\n                    this.lastX = 0;\n                    this.lastY = 0;\n                }\n                return true;\n            }\n        };\n    }\n\n    private currentZoom: number;\n    private xCount: number;\n    private yCount: number;\n    private imageMatrix: DrawableImage[][];\n\n    private prepare(camera: Camera, canvas: Canvas) {\n        let zoom = camera.getZoom();\n\n        if (this.currentZoom === zoom) return;\n        this.currentZoom = zoom;\n\n        let targetSize = this.map.tileSize << zoom;\n\n        let levelData = this.map.levels[zoom];\n        this.xCount = levelData.xMax;\n        this.yCount = levelData.yMax;\n        this.imageMatrix = [];\n        for (let i = 0; i < this.xCount; i++) {\n            this.imageMatrix[i] = [];\n            for (let j = 0; j < this.yCount; j++) {\n                this.imageMatrix[i][j] = new DrawableImage(\n                    this.baseFolder + \"/\" + zoom + \"/\" + i + \"_\" + j + \".jpg\",\n                    i * targetSize, j * targetSize,\n                    targetSize, targetSize,\n                    image => {\n                        canvas.requestRender();\n                    }\n                );\n            }\n        }\n    }\n\n    public render(renderer: Renderer): void {\n        this.prepare(this.camera, this.canvas);\n\n        let density = this.camera.screenSizeToCanvas(1);\n        Ui.setContent(\"textZoomInfo\", (density > 1 ? \"1/\" : \"\") + density + \"x\");\n\n        if (this.imageMatrix) {\n            for (let i = 0; i < this.xCount; i++) {\n                for (let j = 0; j < this.yCount; j++) {\n                    this.imageMatrix[i][j].render(this.canvas, renderer, this.camera);\n                }\n            }\n        }\n    }\n\n    public unload(): void {\n        super.unload();\n    }\n}\n","export class AABB {\n    public x1: number;\n    public y1: number;\n    public x2: number;\n    public y2: number;\n\n    public constructor(x1: number = Math.min(), y1: number = Math.min(), x2: number = Math.max(), y2: number = Math.max()) {\n        this.x1 = x1;\n        this.y1 = y1;\n        this.x2 = x2;\n        this.y2 = y2;\n    }\n    public set(x1: number, y1: number, x2: number, y2: number) {\n        this.x1 = x1;\n        this.y1 = y1;\n        this.x2 = x2;\n        this.y2 = y2;\n    }\n}\n","import {Drawable} from \"./Drawable\";\nimport {Canvas} from \"../Canvas\";\nimport {Renderer} from \"../Renderer\";\nimport {Camera} from \"../Camera\";\nimport {Size} from \"../util/Size\";\nimport {AlphaEntry, ColorEntry, combineColorAlpha} from \"../util/Color\";\nimport {AABB} from \"../util/AABB\";\n\nexport class Point {\n    public constructor(x: number, y: number) {\n        this.x = x;\n        this.y = y;\n    }\n    public x: number;\n    public y: number;\n}\n\nexport class PointSegmentResult {\n    constructor(position: Point, p1Index: number, p2Index: number, distance: number) {\n        this.position = position;\n        this.p1Index = p1Index;\n        this.p2Index = p2Index;\n        this.distance = distance;\n    }\n    position: Point;\n    p1Index: number;\n    p2Index: number;\n    distance: number;\n}\n\nexport class DrawablePolylinePack {\n    public constructor(points: Point[], closed: boolean, lineWidth: Size,\n                       fill: boolean, fillColorName: string, fillAlphaName: string,\n                       stroke: boolean, strokeColorName: string, strokeAlphaName: string) {\n        this.points = points;\n        this.closed = closed;\n        this.lineWidth = lineWidth;\n\n        this.fill = fill;\n        this.fillColorName = fillColorName;\n        this.fillAlphaName = fillAlphaName;\n\n        this.stroke = stroke;\n        this.strokeColorName = strokeColorName;\n        this.strokeAlphaName = strokeAlphaName;\n    }\n\n    points: Point[];\n    closed: boolean;\n    lineWidth: Size;\n\n    fill: boolean;\n    fillColorName: string;\n    fillAlphaName: string;\n\n    stroke: boolean;\n    strokeColorName: string;\n    strokeAlphaName: string;\n}\n\nexport class DrawablePolylinePicker {\n    private polyline: DrawablePolyline;\n    private readonly points: Point[];\n    public constructor(polyline: DrawablePolyline, points: Point[]) {\n        this.polyline = polyline;\n        this.points = points;\n    }\n    private static sqr(dx: number, dy: number) {\n        return dx * dx + dy * dy;\n    }\n    private static testPointSegment(points: Point[], i1: number, i2: number, x: number, y: number): PointSegmentResult {\n        let p1 = points[i1];\n        let p2 = points[i2];\n        let dx = p2.x - p1.x;\n        let dy = p2.y - p1.y;\n        let dd = DrawablePolylinePicker.sqr(dx, dy);\n        if (dd < 0.0001) return null;\n\n        let scalar = ((x - p1.x) * dx + (y - p1.y) * dy) / dd;\n        if (scalar > 1) scalar = 1;\n        if (scalar < 0) scalar = 0;\n\n        let tx = p1.x + scalar * dx;\n        let ty = p1.y + scalar * dy;\n\n        let distance2 = DrawablePolylinePicker.sqr(x - tx, y - ty);\n        return new PointSegmentResult(new Point(tx, ty), i1, i2, Math.sqrt(distance2));\n    }\n    private static testPointPolygon(points: Point[], x: number, y: number): boolean {\n        let length = points.length;\n        let r: boolean = false;\n        for (let i = 0, j = length - 1; i < length; j = i++) {\n            if (((points[i].y > y) != (points[j].y > y)) &&\n                (x < (points[j].x - points[i].x) * (y - points[i].y) / (points[j].y - points[i].y) + points[i].x))\n                r = !r;\n        }\n        return r;\n    }\n\n    public pickPoint(canvasX: number, canvasY: number, radius: number): number {\n        let radius2 = radius * radius;\n        let points = this.points;\n        for (const point of points) {\n            if (DrawablePolylinePicker.sqr(point.x - canvasX, point.y - canvasY) <= radius2) {\n                return points.indexOf(point);\n            }\n        }\n        return null;\n    }\n    public pickLine(canvasX: number, canvasY: number, radius: number): PointSegmentResult {\n        let minResult: PointSegmentResult = null;\n        let minDistance: number = Number.MAX_VALUE;\n\n        let points = this.points;\n        let length = points.length;\n        for (let i = 0, j = length - 1; i < length; j = i++) {\n            let result = DrawablePolylinePicker.testPointSegment(points, i, j, canvasX, canvasY);\n            if (result && result.distance < radius) {\n                if (result.distance < minDistance) {\n                    minDistance = result.distance;\n                    minResult = result;\n                }\n            }\n        }\n        return minResult;\n    }\n    public pickShape(canvasX: number, canvasY: number): boolean {\n        return this.polyline.style.fill && DrawablePolylinePicker.testPointPolygon(this.points, canvasX, canvasY);\n    }\n}\n\nexport class DrawablePolylineEditor {\n    private polyline: DrawablePolyline;\n    private readonly points: Point[];\n    public constructor(polyline: DrawablePolyline, points: Point[]) {\n        this.polyline = polyline;\n        this.points = points;\n    }\n\n    public forEachPoint(func: ((x: number, y: number, index: number) => void)) {\n        this.points.forEach((point, index) => {\n            func(point.x, point.y, index);\n        });\n    }\n\n    public pointCount(): number {\n        return this.points.length;\n    }\n    public getPoint(index: number): Point {\n        let points = this.points;\n        index = (index + points.length) % points.length;\n        return points[index];\n    }\n    public addPoint(x: number, y: number) {\n        this.points.push(new Point(x, y));\n        this.polyline.invalidate();\n    }\n    public insertPoint(x: number, y: number, beforeIndex: number = -1) {\n        let points = this.points;\n        beforeIndex = (beforeIndex + points.length) % points.length;\n        points.splice(beforeIndex, 0, new Point(x, y));\n        this.polyline.invalidate();\n    }\n    public removePoint(index: number) {\n        let points = this.points;\n        index = (index + points.length) % points.length;\n        points.splice(index, 1);\n        this.polyline.invalidate();\n    }\n    public setPoint(index: number, x: number, y: number) {\n        let points = this.points;\n        index = (index + points.length) % points.length;\n        let point = points[index];\n        point.x = x;\n        point.y = y;\n        this.polyline.invalidate();\n    }\n    public move(offsetX: number, offsetY: number) {\n        for (const point of this.points) {\n            point.x += offsetX;\n            point.y += offsetY;\n        }\n        this.polyline.invalidate();\n    }\n    public flipX() {\n        let minX = Math.min();\n        let maxX = Math.max();\n        for (const point of this.points) {\n            minX = Math.min(minX, point.x);\n            maxX = Math.max(maxX, point.x);\n        }\n        let xx = minX + maxX;\n        for (const point of this.points) {\n            point.x = xx - point.x;\n        }\n    }\n    public flipY() {\n        let minY = Math.min();\n        let maxY = Math.max();\n        for (const point of this.points) {\n            minY = Math.min(minY, point.y);\n            maxY = Math.max(maxY, point.y);\n        }\n        let yy = minY + maxY;\n        for (const point of this.points) {\n            point.y = yy - point.y;\n        }\n    }\n    public rotateCW() {\n        let center = this.polyline.calculator.aabbCenter();\n        for (const point of this.points) {\n            let dx = point.x - center.x;\n            let dy = point.y - center.y;\n            point.x = center.x - dy;\n            point.y = center.y + dx;\n        }\n    }\n    public rotateCCW() {\n        let center = this.polyline.calculator.aabbCenter();\n        for (const point of this.points) {\n            let dx = point.x - center.x;\n            let dy = point.y - center.y;\n            point.x = center.x + dy;\n            point.y = center.y - dx;\n        }\n    }\n}\n\nexport class DrawablePolylineCalculator {\n    private polyline: DrawablePolyline;\n    private readonly points: Point[];\n    public constructor(polyline: DrawablePolyline, points: Point[]) {\n        this.polyline = polyline;\n        this.points = points;\n    }\n\n    public centroid(): Point {\n        let area2 = 0;\n        let accX = 0;\n        let accY = 0;\n        for (let i = 0; i < this.points.length; i++) {\n            let p1 = this.points[i];\n            let p2 = this.points[(i + 1) % this.points.length];\n            let c = p1.x * p2.y - p2.x * p1.y;\n            area2 += c;\n            accX += (p1.x + p2.x) * c;\n            accY += (p1.y + p2.y) * c;\n        }\n        let x = accX / 6 / (area2 / 2);\n        let y = accY / 6 / (area2 / 2);\n        return new Point(x, y);\n    }\n\n    public aabb(aabb: AABB = new AABB()): AABB {\n        if (!aabb) aabb = new AABB();\n        let minX = Math.min(), maxX = Math.max();\n        let minY = Math.min(), maxY = Math.max();\n        for (const point of this.points) {\n            minX = Math.min(minX, point.x);\n            maxX = Math.max(maxX, point.x);\n            minY = Math.min(minY, point.y);\n            maxY = Math.max(maxY, point.y);\n        }\n        aabb.set(minX, minY, maxX, maxY);\n        return aabb;\n    }\n    public aabbCenter(): Point {\n        let aabb = this.aabb();\n        let center = new Point((aabb.x1 + aabb.x2) / 2, (aabb.y1 + aabb.y2) / 2);\n        return center;\n    }\n\n    public area(): number {\n        if (this.points.length < 3) return 0;\n        let s = this.points[0].y * (this.points[this.points.length - 1].x - this.points[1].x);\n        for (let i = 1; i < this.points.length; i++) {\n            s += this.points[i].y * (this.points[i - 1].x - this.points[(i + 1) % this.points.length].x);\n        }\n        return Math.abs(s * 0.5);\n    }\n    public length(): number {\n        if (this.points.length < 2) return 0;\n\n        let s = 0;\n        let p0 = this.points[0];\n        let pn = this.points[this.points.length - 1];\n        if (this.polyline.style.closed) {\n            s = DrawablePolylineCalculator.hypot(p0.x - pn.x, p0.y - pn.y);\n        }\n        for (let i = 0; i < this.points.length - 1; i++) {\n            let pi = this.points[i];\n            let pj = this.points[i + 1];\n            s += DrawablePolylineCalculator.hypot(pi.x - pj.x, pi.y - pj.y);\n        }\n        return s;\n    }\n\n    private static hypot(x: number, y: number): number {\n        return Math.sqrt(x * x + y * y);\n    }\n\n    public alignPoint(index: number, radius: number): Point {\n        index = (index + this.points.length) % this.points.length;\n        let xy = this.points[index];\n        let newX = xy.x;\n        let newY = xy.y;\n        let first = this.points[(index + 1) % this.points.length];\n        if (Math.abs(first.x - xy.x) <= radius) newX = first.x;\n        if (Math.abs(first.y - xy.y) <= radius) newY = first.y;\n        if (this.points.length > 2) {\n            let last = this.points[(index - 1 + this.points.length) % this.points.length];\n            if (Math.abs(last.x - xy.x) <= radius) newX = last.x;\n            if (Math.abs(last.y - xy.y) <= radius) newY = last.y;\n        }\n        return new Point(newX, newY);\n    }\n}\n\nexport class DrawablePolylineStyle {\n    public constructor(pack: DrawablePolylinePack) {\n        this._closed = pack.closed;\n        this._lineWidth = pack.lineWidth;\n\n        this._fill = pack.fill;\n        this._fillColor = ColorEntry.findByName(pack.fillColorName);\n        this._fillAlpha = AlphaEntry.findByName(pack.fillAlphaName);\n        this._fillString = combineColorAlpha(this._fillColor, this._fillAlpha);\n\n        this._stroke = pack.stroke;\n        this._strokeColor = ColorEntry.findByName(pack.strokeColorName);\n        this._strokeAlpha = AlphaEntry.findByName(pack.strokeAlphaName);\n        this._strokeString = combineColorAlpha(this._strokeColor, this._strokeAlpha);\n    }\n    protected _closed: boolean;\n    protected _lineWidth: Size;\n\n    protected _fill: boolean;\n    protected _fillColor: ColorEntry;\n    protected _fillAlpha: AlphaEntry;\n    protected _fillString: string;\n\n    protected _stroke: boolean;\n    protected _strokeColor: ColorEntry;\n    protected _strokeAlpha: AlphaEntry;\n    protected _strokeString: string;\n\n    get closed(): boolean {\n        return this._closed;\n    }\n    get lineWidth(): Size {\n        return this._lineWidth;\n    }\n\n    get fill(): boolean {\n        return this._fill;\n    }\n    get fillColor(): ColorEntry {\n        return this._fillColor;\n    }\n    get fillAlpha(): AlphaEntry {\n        return this._fillAlpha;\n    }\n    get fillString(): string {\n        return this._fillString;\n    }\n\n    get stroke(): boolean {\n        return this._stroke;\n    }\n    get strokeColor(): ColorEntry {\n        return this._strokeColor;\n    }\n    get strokeAlpha(): AlphaEntry {\n        return this._strokeAlpha;\n    }\n    get strokeString(): string {\n        return this._strokeString;\n    }\n\n    get onScreen(): number {\n        return this._lineWidth.onScreen;\n    }\n    get onCanvas(): number {\n        return this._lineWidth.onCanvas;\n    }\n    get ofScreen(): number {\n        return this._lineWidth.ofScreen;\n    }\n\n    public pack(): DrawablePolylinePack {\n        return new DrawablePolylinePack(\n            null,\n            this._closed,\n            this._lineWidth,\n\n            this._fill,\n            this._fillColor.name,\n            this._fillAlpha.name,\n\n            this._stroke,\n            this._strokeColor.name,\n            this._strokeAlpha.name,\n        )\n    }\n\n    set closed(value: boolean) {\n        this._closed = value;\n    }\n    set fill(value: boolean) {\n        this._fill = value;\n    }\n    set stroke(value: boolean) {\n        this._stroke = value;\n    }\n\n    set onScreen(onScreen: number) {\n        this._lineWidth.onScreen = onScreen;\n    }\n    set onCanvas(onCanvas: number) {\n        this._lineWidth.onCanvas = onCanvas;\n    }\n    set ofScreen(ofScreen: number) {\n        this._lineWidth.ofScreen = ofScreen;\n    }\n\n    public setFillColor(fillColor: ColorEntry, fillAlpha: AlphaEntry) {\n        this._fillColor = fillColor;\n        this._fillAlpha = fillAlpha;\n        this._fillString = combineColorAlpha(this._fillColor, this._fillAlpha);\n    }\n    public setStrokeColor(strokeColor: ColorEntry, strokeAlpha: AlphaEntry) {\n        this._strokeColor = strokeColor;\n        this._strokeAlpha = strokeAlpha;\n        this._strokeString = combineColorAlpha(this._strokeColor, this._strokeAlpha);\n    }\n}\n\nexport class DrawablePolyline extends Drawable {\n    private readonly points: Point[];\n\n    public constructor(pack: DrawablePolylinePack) {\n        super();\n        this.points = pack.points;\n        this.style = new DrawablePolylineStyle(pack);\n        this.picker = new DrawablePolylinePicker(this, this.points);\n        this.editor = new DrawablePolylineEditor(this, this.points);\n        this.calculator = new DrawablePolylineCalculator(this, this.points);\n    }\n\n    public readonly style: DrawablePolylineStyle;\n    public readonly picker: DrawablePolylinePicker;\n    public readonly editor: DrawablePolylineEditor;\n    public readonly calculator: DrawablePolylineCalculator;\n\n    public clone(offsetX: number = 0, offsetY: number = 0): DrawablePolylinePack {\n        let points = [];\n        for (const point of this.points) {\n            points.push(new Point(point.x + offsetX, point.y + offsetY));\n        }\n        let pack = this.style.pack();\n        pack.points = points;\n        return pack;\n    }\n    public pack() : DrawablePolylinePack {\n        let pack = this.style.pack();\n        pack.points = this.points;\n        return pack;\n    }\n\n    public invalidate() {\n        this.valid = false;\n    }\n    private canvasAABB: AABB = new AABB();\n    private valid: boolean = false;\n    private validate() {\n        if (!this.valid) {\n            this.calculator.aabb(this.canvasAABB);\n        }\n    }\n\n    public render(canvas: Canvas, renderer: Renderer, camera: Camera): void {\n        this.validate();\n        let inScreen = camera.canvasAABBInScreen(this.canvasAABB);\n        if (inScreen) {\n            renderer.setFillColor(this.style.fillString);\n            renderer.setStrokeColor(this.style.strokeString);\n            renderer.renderPolyline(camera, this.points, this.style.closed, this.style.fill, this.style.stroke, this.style.lineWidth);\n        }\n    }\n\n}\n","import {Layer} from \"../Layer\";\nimport {Canvas} from \"../Canvas\";\nimport {Renderer} from \"../Renderer\";\nimport {DrawablePolyline} from \"../drawable/DrawablePolyline\";\nimport {MouseListener} from \"../MouseListener\";\nimport {Data} from \"../data/Data\";\nimport {Selection} from \"./Selection\";\nimport {Names} from \"./Names\";\n\nexport class LayerPolylineView extends Layer {\n\n    private polylines: DrawablePolyline[] = [];\n\n    public constructor(canvas: Canvas) {\n        super(Names.POLYLINE_VIEW, canvas);\n    }\n\n    public loadData(data: Data): void {\n        this.polylines = [];\n\n        if (data.polylines) {\n            for (let pack of data.polylines) {\n                this.polylines.push(new DrawablePolyline(pack))\n            }\n        }\n\n        //listen to mouse click to select polyline\n        let self = this;\n        this._mouseListener = new class extends MouseListener {\n            private moved = false;\n            onmousedown(event: MouseEvent): boolean {\n                this.moved = false;\n                return false;\n            }\n            onmouseup(event: MouseEvent): boolean {\n                if (event.button == 0 && !this.moved) {\n                    let radius = self.camera.screenSizeToCanvas(5);\n                    let canvasXY = self.camera.screenXyToCanvas(event.offsetX, event.offsetY);\n                    let x = canvasXY.x, y = canvasXY.y;\n                    let selected: DrawablePolyline = null;\n                    for (let polyline of self.polylines) {\n                        let pickPointIndex = polyline.picker.pickPoint(x, y, radius);\n                        let pickLine = polyline.picker.pickLine(x, y, radius);\n                        let pickShape = polyline.picker.pickShape(x, y);\n                        if (pickPointIndex != null || pickLine || pickShape) {\n                            selected = polyline;\n                        }\n                    }\n                    if (selected) {\n                        Selection.select(Names.POLYLINE_EDIT, selected);\n                        return true;\n                    }\n                    Selection.deselect(Names.POLYLINE_CREATE);\n                    Selection.deselect(Names.POLYLINE_EDIT);\n                    return false;\n                } else {\n                    return false;\n                }\n            }\n            onmousemove(event: MouseEvent): boolean {\n                if ((event.buttons & 1) && (event.movementX != 0 && event.movementY != 0)) {\n                    this.moved = true;\n                }\n                return false;\n            }\n        };\n    }\n\n    public addPolyline(polyline: DrawablePolyline) {\n        this.polylines.push(polyline);\n        this.canvas.requestRender();\n    }\n    public deletePolyline(polyline: DrawablePolyline): boolean {\n        let index = this.polylines.indexOf(polyline);\n        if (index !== -1) {\n            this.polylines.splice(index, 1);\n            return true;\n        } else {\n            return false;\n        }\n    }\n    public containPolyline(polyline: DrawablePolyline): boolean {\n        return this.polylines.indexOf(polyline) >= 0;\n    }\n\n    public saveData(data: Data): void {\n        data.polylines = [];\n        for (const polyline of this.polylines) {\n            data.polylines.push(polyline.pack());\n        }\n    }\n\n    public render(renderer: Renderer): void {\n        super.render(renderer);\n        for (const polyline of this.polylines) {\n            polyline.render(this.canvas, renderer, this.camera);\n        }\n    }\n\n    public unload(): void {\n        super.unload();\n    }\n\n}\n","import {Layer} from \"../Layer\";\nimport {Map} from \"../data/Map\";\nimport {DrawablePolyline} from \"../drawable/DrawablePolyline\";\nimport {Canvas} from \"../Canvas\";\nimport {MouseListener} from \"../MouseListener\";\nimport {Renderer} from \"../Renderer\";\nimport {LayerPolylineView} from \"./LayerPolylineView\";\nimport {Ui} from \"../util/Ui\";\nimport {Data} from \"../data/Data\";\nimport {Selection} from \"./Selection\";\nimport {Drawable} from \"../drawable/Drawable\";\nimport {Names} from \"./Names\";\n\nexport class LayerPolylineEdit extends Layer {\n    private static readonly HINT_ELEMENT_ID = \"hint\";\n    private static readonly HINT_EDIT_POLYLINE =\n        \"1. hold left button to drag points<br>\" +\n        \"2. hold ctrl to help with horizontal/vertical line<br>\" +\n        \"3. hold alt to drag polyline<br>\" +\n        \"4. hold ctrl+alt to copy and drag polyline<br>\" +\n        \"5. double click on line to create point<br>\" +\n        \"6. right-click / double left-click point to delete it<br>\";\n\n    private static readonly MAG_RADIUS = 10;\n\n    private map: Map;\n    private polylineEdit: DrawablePolyline = null;\n    private layerView: LayerPolylineView;\n\n    public constructor(canvas: Canvas) {\n        super(Names.POLYLINE_EDIT, canvas);\n        let self = this;\n        Selection.register(Names.POLYLINE_EDIT, (item: Drawable) => {\n            this.startEditingPolyline(item as DrawablePolyline);\n        }, () => {\n            self.finishEditing();\n        });\n    }\n\n    public loadMap(map: Map): void {\n        this.map = map;\n    }\n\n    public loadData(data: Data): void {\n        this.layerView = this.canvas.findLayer(Names.POLYLINE_VIEW) as LayerPolylineView;\n        this.polylineEdit = null;\n        this.finishEditing();\n        Ui.setVisibility(\"panelPolylineSelected\", false);\n    }\n\n    public startEditingPolyline(polyline: DrawablePolyline): void {\n        this.finishEditing();\n\n        //show polyline and its point indicators\n        this.polylineEdit = polyline;\n        this.bindPolylineConfigUi(this.polylineEdit);\n\n        Ui.setContent(LayerPolylineEdit.HINT_ELEMENT_ID, LayerPolylineEdit.HINT_EDIT_POLYLINE);\n\n        //start listening to mouse events: drag point, remove point on double click, add point on double click\n        let self = this;\n        this._mouseListener = new class extends MouseListener {\n            private down: boolean = false;\n            private moved: boolean = false;\n\n            private dragPointIndex: number = null;\n\n            private dragShape: boolean = false;\n            private dragShapeX: number = -1;\n            private dragShapeY: number = -1;\n\n            onmousedown(event: MouseEvent): boolean {\n                this.dragPointIndex = null;\n\n                if (event.button == 0) { //left button down => test drag point\n                    this.down = true;\n\n                    //test point\n                    let position = self.camera.screenXyToCanvas(event.offsetX, event.offsetY);\n                    let pointIndex = polyline.picker.pickPoint(position.x, position.y, self.camera.screenSizeToCanvas(5));\n                    if (pointIndex != null) { //start dragging this point\n                        this.dragPointIndex = pointIndex;\n                        return true;\n                    }\n\n                    let shape = polyline.picker.pickShape(position.x, position.y);\n                    if (pointIndex == null && shape && event.altKey) {\n                        if (event.ctrlKey) {\n                            let copied = new DrawablePolyline(polyline.clone());\n                            self.layerView.addPolyline(copied);\n                        }\n                        this.dragShape = true;\n                        this.dragShapeX = position.x;\n                        this.dragShapeY = position.y;\n                    }\n                } else if (event.button == 2) {\n                    this.moved = false;\n                }\n                return false;\n            }\n            onmouseup(event: MouseEvent): boolean {\n                let wasDragging: boolean = this.dragPointIndex != null || !!this.dragShape; //pass event if not dragging, so that LayerPolylineView will deselect this polyline\n\n                this.dragPointIndex = null;\n\n                this.dragShape = false;\n                this.dragShapeX = -1;\n                this.dragShapeY = -1;\n\n                if (event.button == 0) { //left button up => nothing\n                    this.down = false;\n                    return wasDragging;\n                } else if (event.button == 2) {\n                    let hit = false;\n                    if (!this.moved) {\n                        let position = self.camera.screenXyToCanvas(event.offsetX, event.offsetY);\n                        //test points\n                        let pointIndex = polyline.picker.pickPoint(position.x, position.y, self.camera.screenSizeToCanvas(5));\n                        if (pointIndex != null) { //delete point\n                            if (polyline.editor.pointCount() > 3) { //so it will be at least a triangle\n                                polyline.editor.removePoint(pointIndex);\n                                self.canvas.requestRender();\n                            }\n                            hit = true;\n                        }\n                    }\n                    this.moved = false;\n                    return hit;\n                }\n                return false;\n            }\n            ondblclick(event: MouseEvent): boolean { //double click => remove point on selection or add point on segment\n                if (event.button == 0) {\n                    let position = self.camera.screenXyToCanvas(event.offsetX, event.offsetY);\n\n                    //test points\n                    let pointIndex = polyline.picker.pickPoint(position.x, position.y, self.camera.screenSizeToCanvas(5));\n                    if (pointIndex != null) { //delete point\n                        if (polyline.editor.pointCount() > 3) { //so it will be at least a triangle\n                            polyline.editor.removePoint(pointIndex);\n                            self.canvas.requestRender();\n                        }\n                        return true;\n                    }\n\n                    //test segments\n                    let segment = polyline.picker.pickLine(position.x, position.y, self.camera.screenSizeToCanvas(5));\n                    if (segment) { //add point\n                        let newIndex = segment.p1Index; //insert point after p1\n                        polyline.editor.insertPoint(segment.position.x, segment.position.y, newIndex);\n                        self.canvas.requestRender();\n                        return true;\n                    }\n                }\n\n                return false;\n            }\n            onmousemove(event: MouseEvent): boolean {\n                if (this.down) { //left button is down => drag\n                    let position = self.camera.screenXyToCanvas(event.offsetX, event.offsetY);\n\n                    if (this.dragPointIndex != null) {\n                        polyline.editor.setPoint(this.dragPointIndex, position.x, position.y);\n                        if (event.ctrlKey) {\n                            let radius = self.camera.screenSizeToCanvas(LayerPolylineEdit.MAG_RADIUS);\n                            let result = polyline.calculator.alignPoint(this.dragPointIndex, radius);\n                            polyline.editor.setPoint(this.dragPointIndex, result.x, result.y);\n                        }\n\n                        self.canvas.requestRender();\n                        return true;\n\n                    } else if (this.dragShape) {\n                        polyline.editor.move(position.x - this.dragShapeX, position.y - this.dragShapeY);\n                        this.dragShapeX = position.x;\n                        this.dragShapeY = position.y;\n\n                        self.canvas.requestRender();\n                        return true;\n                    }\n                } else if (event.buttons & 2) {\n                    this.moved = true;\n                }\n                return false;\n            }\n        };\n\n        this.canvas.requestRender();\n    }\n\n    public finishEditing(): void {\n        Ui.setVisibility(\"panelPolylineSelected\", false);\n\n        if (this.polylineEdit) {\n            this.polylineEdit = null;\n            this.canvas.requestRender();\n        }\n        this._mouseListener = null;\n    }\n\n    public render(renderer: Renderer): void {\n        if (this.polylineEdit) {\n            //draw all points\n            this.polylineEdit.editor.forEachPoint((x, y) => {\n                this.drawPointCircle(x, y, renderer);\n            });\n        }\n    }\n\n    private drawPointCircle(x: number, y: number, renderer: Renderer) {\n        let position = this.camera.canvasToScreen(x, y);\n        renderer.setColor(\"rgba(255,255,255,1)\");\n        renderer.drawCircle(position.x, position.y, 5, false, true, 1);\n        renderer.setColor(\"rgba(0,0,0,0.5)\");\n        renderer.drawCircle(position.x, position.y, 4, true, false);\n    }\n\n    public deleteEditing() {\n        if (this.polylineEdit) {\n            this.layerView.deletePolyline(this.polylineEdit);\n            this.finishEditing();\n        }\n    }\n\n    private bindPolylineConfigUi(polyline: DrawablePolyline) {\n        Ui.setVisibility(\"panelPolylineSelected\", true);\n\n        Ui.bindButtonOnClick(\"polylineButtonCopy\", () => {\n            let offset = this.canvas.getCamera().screenSizeToCanvas(20);\n            let newPolyline = new DrawablePolyline(polyline.clone(offset, offset));\n\n            this.finishEditing();\n            this.layerView.addPolyline(newPolyline);\n            this.startEditingPolyline(newPolyline);\n\n            this.canvas.requestRender();\n        });\n\n        // Ui.setVisibility(\"polylineAreaContainer\", this.map.widthMillimeter > 0 && this.map.heightMillimeter > 0);\n        Ui.bindButtonOnClick(\"polylineButtonArea\", () => {\n            Ui.setContent(\"polylineTextArea\", \"\");\n            if (polyline.style.fill) {\n                let width = this.map.widthMillimeter;\n                let height = this.map.heightMillimeter;\n                let unit = \"mm^2\";\n                if (!(this.map.widthMillimeter > 0 && this.map.heightMillimeter > 0)) {\n                    width = this.map.width;\n                    height = this.map.height;\n                    unit = \"pixels\"\n                }\n\n                let area = polyline.calculator.area();\n                let areaMM2 = area / this.map.width / this.map.height * width * height;\n                areaMM2 = Math.round(areaMM2 * 100) / 100;\n                Ui.setContent(\"polylineTextArea\", areaMM2 + unit);\n            } else {\n                let width = this.map.widthMillimeter;\n                let height = this.map.heightMillimeter;\n                let unit = \"mm\";\n                if (!(this.map.widthMillimeter > 0 && this.map.heightMillimeter > 0)) {\n                    width = this.map.width;\n                    height = this.map.height;\n                    unit = \"pixels\"\n                }\n\n                let length = polyline.calculator.length();\n                let lengthMM = length * Math.sqrt(width * height / this.map.width / this.map.height);\n                lengthMM = Math.round(lengthMM * 100) / 100;\n                Ui.setContent(\"polylineTextArea\", lengthMM + unit);\n            }\n        });\n        Ui.setContent(\"polylineTextArea\", \"\");\n\n        Ui.bindButtonOnClick(\"polylineButtonRotateCCW\", () => {\n            polyline.editor.rotateCCW();\n            this.canvas.requestRender();\n        });\n        Ui.bindButtonOnClick(\"polylineButtonRotateCW\", () => {\n            polyline.editor.rotateCW();\n            this.canvas.requestRender();\n        });\n        Ui.bindButtonOnClick(\"polylineButtonFlipX\", () => {\n            polyline.editor.flipX();\n            this.canvas.requestRender();\n        });\n        Ui.bindButtonOnClick(\"polylineButtonFlipY\", () => {\n            polyline.editor.flipY();\n            this.canvas.requestRender();\n        });\n\n\n        Ui.bindCheckbox(\"polylineCheckboxFill\", polyline.style.fill, newValue => {\n            polyline.style.fill = newValue;\n            this.canvas.requestRender();\n        });\n        Ui.bindCheckbox(\"polylineCheckboxStroke\", polyline.style.stroke, newValue => {\n            polyline.style.stroke = newValue;\n            this.canvas.requestRender();\n        });\n        Ui.bindCheckbox(\"polylineCheckboxClosed\", polyline.style.closed, newValue => {\n            polyline.style.closed = newValue;\n            this.canvas.requestRender();\n        });\n\n        Ui.bindNumber(\"polylineTextSizeOnScreen\", polyline.style.onScreen, newValue => {\n            polyline.style.onScreen = newValue;\n            this.canvas.requestRender();\n        });\n        Ui.bindNumber(\"polylineTextSizeOnCanvas\", polyline.style.onCanvas, newValue => {\n            polyline.style.onCanvas = newValue;\n            this.canvas.requestRender();\n        });\n        Ui.bindNumber(\"polylineTextSizeOfScreen\", polyline.style.ofScreen * 1000, newValue => {\n            polyline.style.ofScreen = newValue * 0.001;\n            this.canvas.requestRender();\n        });\n\n        Ui.bindColor(\"polylineContainerStrokeColor\", \"polylineContainerStrokeAlpha\", polyline.style.strokeColor, polyline.style.strokeAlpha, (newColor, newAlpha) => {\n            polyline.style.setStrokeColor(newColor, newAlpha);\n            this.canvas.requestRender();\n        });\n        Ui.bindColor(\"polylineContainerFillColor\", \"polylineContainerFillAlpha\", polyline.style.fillColor, polyline.style.fillAlpha, (newColor, newAlpha) => {\n            polyline.style.setFillColor(newColor, newAlpha);\n            this.canvas.requestRender();\n        });\n    }\n}\n","import {Drawable} from \"./Drawable\";\nimport {Canvas} from \"../Canvas\";\nimport {Renderer} from \"../Renderer\";\nimport {Camera} from \"../Camera\";\nimport {Size} from \"../util/Size\";\nimport {AlphaEntry, ColorEntry, combineColorAlpha} from \"../util/Color\";\nimport {AABB} from \"../util/AABB\";\n\nexport class DrawableTextPack {\n    public constructor(text: string, colorName: string, alphaName: string,\n                       // anchorX: CanvasTextAlign, anchorY: CanvasTextBaseline,\n                       fontSize: Size, x: number, y: number) {\n        this.text = text;\n        this.colorName = colorName;\n        this.alphaName = alphaName;\n        this.fontSize = fontSize;\n        this.x = x;\n        this.y = y;\n    }\n    text: string = \"\";\n    colorName: string;\n    alphaName: string;\n    fontSize: Size;\n    x: number;\n    y: number;\n}\n\nexport class DrawableText extends Drawable {\n    private _text: string = \"\";\n    private _x: number;\n    private _y: number;\n\n    public color: ColorEntry;\n    public alpha: AlphaEntry;\n    public colorString: string;\n    protected readonly fontSize: Size;\n\n    public constructor(pack: DrawableTextPack) {\n        super();\n        this._text = pack.text;\n        this.color = ColorEntry.findByName(pack.colorName);\n        this.alpha = AlphaEntry.findByName(pack.alphaName);\n        this.colorString = combineColorAlpha(this.color, this.alpha);\n        this.fontSize = pack.fontSize;\n        this._x = pack.x;\n        this._y = pack.y;\n    }\n\n    private invalidate() {\n        this.sizeValid = false;\n    }\n    private _canvasAABB: AABB = new AABB();\n    private sizeValid: boolean = false;\n    private canvasZoom: number = -1;\n    private canvasWidth: number = 0;\n    private canvasHeight: number = 0;\n    private screenWidth: number = 0;\n    private screenHeight: number = 0;\n\n    get text(): string {\n        return this._text;\n    }\n    get x(): number {\n        return this._x;\n    }\n    get y(): number {\n        return this._y;\n    }\n    public validateCanvasAABB(camera: Camera, renderer: Renderer): AABB {\n        this.validate(camera, renderer);\n        return this._canvasAABB;\n    }\n\n    get onScreen(): number {\n        return this.fontSize.onScreen;\n    }\n    get onCanvas(): number {\n        return this.fontSize.onCanvas;\n    }\n    get ofScreen(): number {\n        return this.fontSize.ofScreen;\n    }\n    set onScreen(onScreen: number) {\n        this.fontSize.onScreen = onScreen;\n        this.invalidate();\n    }\n    set onCanvas(onCanvas: number) {\n        this.fontSize.onCanvas = onCanvas;\n        this.invalidate();\n    }\n    set ofScreen(ofScreen: number) {\n        this.fontSize.ofScreen = ofScreen;\n        this.invalidate();\n    }\n\n    public setPosition(x: number, y: number) {\n        this._x = x;\n        this._y = y;\n        this.invalidate();\n    }\n    set text(value: string) {\n        this._text = value;\n        this.invalidate();\n    }\n\n    public setColorAlpha(color: ColorEntry, alpha: AlphaEntry) {\n        this.color = color;\n        this.alpha = alpha;\n        this.colorString = combineColorAlpha(this.color, this.alpha);\n    }\n\n    public clone(offsetX: number, offsetY: number): DrawableTextPack {\n        return new DrawableTextPack(\n            this._text,\n            this.color.name,\n            this.alpha.name,\n            this.fontSize,\n            this._x + offsetX,\n            this._y + offsetY,\n        )\n    }\n\n    public pack(): DrawableTextPack {\n        return new DrawableTextPack(\n            this._text,\n            this.color.name,\n            this.alpha.name,\n            this.fontSize,\n            this._x,\n            this._y,\n        )\n    }\n\n    public render(canvas: Canvas, renderer: Renderer, camera: Camera): void {\n        renderer.setColor(this.colorString);\n        this.validate(camera, renderer);\n        let inScreen = camera.canvasAABBInScreen(this._canvasAABB);\n        if (inScreen) {\n            renderer.renderText(camera, this._text, this.screenHeight, this._x, this._y, \"center\", \"middle\");\n        }\n    }\n\n    private validate(camera: Camera, renderer: Renderer) {\n        if (!this.sizeValid || this.canvasZoom != camera.getZoom()) {\n            this.sizeValid = true;\n\n            let wh = renderer.measureText(camera, this._text, this.fontSize);\n            let ratio = camera.screenSizeToCanvas(1);\n            this.canvasZoom = camera.getZoom();\n            this.canvasWidth = wh[0] * ratio / 2;\n            this.canvasHeight = wh[1] * ratio / 2;\n            this.screenWidth = wh[0];\n            this.screenHeight = wh[1];\n\n            this.calcCanvasAABB();\n        }\n    }\n\n    public pick(x: number, y: number, radius: number): boolean {\n        let h = (this._x - this.canvasWidth - radius <= x) && (x <= this._x + this.canvasWidth + radius);\n        let v = (this._y - this.canvasHeight - radius <= y) && (y <= this._y + this.canvasHeight + radius);\n        return h && v;\n    }\n\n    private calcCanvasAABB(): AABB {\n        this._canvasAABB.x1 = this.x - this.canvasWidth;\n        this._canvasAABB.y1 = this.y - this.canvasHeight;\n        this._canvasAABB.x2 = this.x + this.canvasWidth;\n        this._canvasAABB.y2 = this.y + this.canvasHeight;\n        return this._canvasAABB;\n    }\n}\n","import {Layer} from \"../Layer\";\nimport {DrawableText, DrawableTextPack} from \"../drawable/DrawableText\";\nimport {Canvas} from \"../Canvas\";\nimport {Size} from \"../util/Size\";\nimport {MouseListener} from \"../MouseListener\";\nimport {Renderer} from \"../Renderer\";\nimport {LayerTextView} from \"./LayerTextView\";\nimport {Ui} from \"../util/Ui\";\nimport {Data} from \"../data/Data\";\nimport {Selection} from \"./Selection\";\nimport {Drawable} from \"../drawable/Drawable\";\nimport {Names} from \"./Names\";\n\nexport class LayerTextEdit extends Layer {\n\n    private static readonly HINT_ELEMENT_ID = \"hint\";\n\n    private static readonly HINT_EDIT_TEXT =\n        \"1. hold alt to drag<br>\" +\n        \"2. hold ctrl+alt to copy and drag <br>\";\n\n    private textEdit: DrawableText = null;\n    private layerView: LayerTextView;\n\n    public constructor(canvas: Canvas) {\n        super(Names.TEXT_EDIT, canvas);\n        let self = this;\n        Selection.register(Names.TEXT_EDIT, (item: Drawable) => {\n            self.startEditingText(item as DrawableText);\n        }, () => {\n            self.finishEditing();\n        });\n    }\n\n    public loadData(data: Data): void {\n        this.layerView = this.canvas.findLayer(Names.TEXT_VIEW) as LayerTextView;\n        this.finishEditing();\n        Ui.setVisibility(\"panelTextSelected\", false);\n    }\n\n    public startEditingText(text: DrawableText): void {\n        this.finishEditing();\n\n        //show text and its point indicators\n        this.textEdit = text;\n        this.bindTextConfigUi(this.textEdit);\n\n        Ui.setContent(LayerTextEdit.HINT_ELEMENT_ID, LayerTextEdit.HINT_EDIT_TEXT);\n\n        //start listening to mouse events: drag point, remove point on double click, add point on double click\n        let self = this;\n        this._mouseListener = new class extends MouseListener {\n            private down: boolean = false;\n            private drag: boolean = false;\n            private dragX: number = 0;\n            private dragY: number = 0;\n\n            onmousedown(event: MouseEvent): boolean {\n                if (event.button == 0) { //left button down => test drag point\n                    this.down = true;\n                    this.drag = false;\n\n                    //test\n                    let position = self.camera.screenXyToCanvas(event.offsetX, event.offsetY);\n                    let pick = text.pick(position.x, position.y, self.camera.screenSizeToCanvas(5));\n                    if (pick && event.altKey) { //start dragging\n                        if (event.ctrlKey) {\n                            let copied = new DrawableText(text.clone(0, 0));\n                            self.layerView.addText(copied);\n                        }\n                        this.drag = true;\n                        this.dragX = position.x - text.x;\n                        this.dragY = position.y - text.y;\n                        return event.altKey;\n                    }\n                }\n                return false;\n            }\n            onmouseup(event: MouseEvent): boolean {\n                let passEvent: boolean = !this.drag; //pass event if not moving point, so that LayerTextView will deselect this text\n                this.drag = false;\n\n                if (event.button == 0) { //left button up => nothing\n                    this.down = false;\n                    return !passEvent;\n                }\n                return false;\n            }\n            onmousemove(event: MouseEvent): boolean {\n                if (this.down && this.drag) {\n                    let position = self.camera.screenXyToCanvas(event.offsetX, event.offsetY);\n                    self.textEdit.setPosition(position.x - this.dragX, position.y - this.dragY);\n                    self.canvas.requestRender();\n                    return true;\n                }\n                return false;\n            }\n        };\n\n        this.canvas.requestRender();\n    }\n\n    public finishEditing(): void {\n        Ui.setVisibility(\"panelTextSelected\", false);\n\n        if (this.textEdit) {\n            if (this.textEdit.text.length == 0) {\n                this.layerView.deleteText(this.textEdit);\n            }\n            this.textEdit = null;\n            this.canvas.requestRender();\n        }\n        this._mouseListener = null;\n    }\n\n    public render(renderer: Renderer): void {\n        if (this.textEdit) {\n            //draw rect\n            renderer.setColor(this.textEdit.colorString);\n            let aabb = this.textEdit.validateCanvasAABB(this.camera, renderer);\n            let p1 = this.camera.canvasToScreen(aabb.x1, aabb.y1);\n            let p2 = this.camera.canvasToScreen(aabb.x2, aabb.y2);\n            renderer.drawRect(\n                p1.x - 5, p1.y - 5, p2.x + 5, p2.y + 5,\n                false, true, 2\n            );\n        }\n    }\n\n    public deleteEditing() {\n        if (this.textEdit) {\n            this.layerView.deleteText(this.textEdit);\n            this.finishEditing();\n        }\n    }\n\n    private bindTextConfigUi(text: DrawableText) {\n        Ui.setVisibility(\"panelTextSelected\", true);\n\n        Ui.bindButtonOnClick(\"textButtonCopy\", () => {\n            let offset = this.canvas.getCamera().screenSizeToCanvas(10);\n            let newText = new DrawableText(text.clone(offset, offset));\n\n            this.finishEditing();\n            this.layerView.addText(newText);\n            this.startEditingText(newText);\n\n            this.canvas.requestRender();\n        });\n\n        Ui.bindValue(\"textTextContent\", text.text, newValue => {\n            text.text = newValue;\n            this.canvas.requestRender();\n        });\n\n        Ui.bindNumber(\"textTextSizeOnScreen\", text.onScreen, newValue => {\n            text.onScreen = newValue;\n            this.canvas.requestRender();\n        });\n        Ui.bindNumber(\"textTextSizeOnCanvas\", text.onCanvas, newValue => {\n            text.onCanvas = newValue;\n            this.canvas.requestRender();\n        });\n        Ui.bindNumber(\"textTextSizeOfScreen\", text.ofScreen * 1000, newValue => {\n            text.ofScreen = newValue * 0.001;\n            this.canvas.requestRender();\n        });\n\n        Ui.bindColor(\"textContainerColor\", \"textContainerAlpha\", text.color, text.alpha, (newColor, newAlpha) => {\n            text.setColorAlpha(newColor, newAlpha);\n            this.canvas.requestRender();\n        });\n    }\n}\n","import {Layer} from \"../Layer\";\nimport {Canvas} from \"../Canvas\";\nimport {Renderer} from \"../Renderer\";\nimport {MouseListener} from \"../MouseListener\";\nimport {DrawableText} from \"../drawable/DrawableText\";\nimport {Data} from \"../data/Data\";\nimport {Selection} from \"./Selection\";\nimport {LayerPolylineEdit} from \"./LayerPolylineEdit\";\nimport {Names} from \"./Names\";\n\nexport class LayerTextView extends Layer {\n\n    private texts: DrawableText[] = [];\n\n    public constructor(canvas: Canvas) {\n        super(Names.TEXT_VIEW, canvas);\n    }\n\n    public loadData(data: Data): void {\n        this.texts = [];\n\n        if (data.texts) {\n            for (let pack of data.texts) {\n                this.texts.push(new DrawableText(pack))\n            }\n        }\n\n        //listen to mouse click to select text\n        let self = this;\n        this._mouseListener = new class extends MouseListener {\n            private moved = false;\n            onmousedown(event: MouseEvent): boolean {\n                this.moved = false;\n                return false;\n            }\n            onmouseup(event: MouseEvent): boolean {\n                if (event.button == 0 && !this.moved) {\n                    let canvasXY = self.camera.screenXyToCanvas(event.offsetX, event.offsetY);\n                    let x = canvasXY.x, y = canvasXY.y;\n                    let selected: DrawableText = null;\n                    for (let text of self.texts) {\n                        let pick = text.pick(x, y, self.camera.screenSizeToCanvas(5));\n                        if (pick) selected = text;\n                    }\n                    if (selected) {\n                        Selection.select(Names.TEXT_EDIT, selected);\n                        return true;\n                    }\n                    Selection.deselect(Names.TEXT_CREATE);\n                    Selection.deselect(Names.TEXT_EDIT);\n                    return false;\n                } else {\n                    return false;\n                }\n            }\n            onmousemove(event: MouseEvent): boolean {\n                if ((event.buttons & 1) && (event.movementX != 0 && event.movementY != 0)) {\n                    this.moved = true;\n                }\n                return false;\n            }\n        };\n    }\n\n    public addText(text: DrawableText) {\n        this.texts.push(text);\n        this.canvas.requestRender();\n    }\n    public deleteText(text: DrawableText): boolean {\n        let index = this.texts.indexOf(text);\n        if (index !== -1) {\n            this.texts.splice(index, 1);\n            return true;\n        } else {\n            return false;\n        }\n    }\n\n    public saveData(data: Data): void {\n        data.texts = [];\n        for (const text of this.texts) {\n            data.texts.push(text.pack());\n        }\n    }\n\n    public render(renderer: Renderer): void {\n        super.render(renderer);\n        for (const text of this.texts) {\n            text.render(this.canvas, renderer, this.camera);\n        }\n    }\n\n    public unload(): void {\n        super.unload();\n    }\n\n}\n","import {NetUtil} from \"./NetUtil\";\n\nexport class Github {\n    static getComments(repo: string, issueId: number, callback: (comments: GithubComment[]) => void) {\n        NetUtil.get(\"https://api.github.com/repos/\" + repo + \"/issues/\" + issueId + \"/comments\", json => {\n            try {\n                let array = JSON.parse(json) as GithubComment[];\n                callback(array);\n            } catch (e) {\n            }\n        });\n    }\n\n    static getIssueLink(repo: string, issueId: number): string {\n        return \"https://github.com/\" + repo + \"/issues/\" + issueId;\n    }\n    static getCommentLink(repo: string, issueId: number, commentId: number): string {\n        return \"https://github.com/\" + repo + \"/issues/\" + issueId + \"#issuecomment-\" + commentId;\n    }\n}\n\nexport class GithubUser {\n    login: string;\n    id: number;\n}\n\nexport class GithubComment {\n    user: GithubUser;\n    id: number;\n    body: string;\n}","export class Size {\n    onScreen: number;\n    onCanvas: number;\n    ofScreen: number;\n\n    constructor(onScreen: number, onCanvas?: number, ofScreen?: number) {\n        this.onScreen = onScreen;\n        this.onCanvas = onCanvas ? onCanvas : 0;\n        this.ofScreen = ofScreen ? ofScreen : 0;\n    }\n}","import {Layer} from \"../Layer\";\nimport {Map} from \"../data/Map\";\nimport {DrawablePolyline, DrawablePolylinePack} from \"../drawable/DrawablePolyline\";\nimport {Canvas} from \"../Canvas\";\nimport {Size} from \"../util/Size\";\nimport {MouseListener} from \"../MouseListener\";\nimport {Renderer} from \"../Renderer\";\nimport {Position} from \"../util/Transform\";\nimport {LayerPolylineView} from \"./LayerPolylineView\";\nimport {Ui} from \"../util/Ui\";\nimport {Data} from \"../data/Data\";\nimport {Selection} from \"./Selection\";\nimport {Names} from \"./Names\";\n\nexport class LayerPolylineCreate extends Layer {\n\n    private static readonly HINT_ELEMENT_ID = \"hint\";\n    private static readonly HINT_NEW_POLYLINE =\n        \"1. left click to create point<br>\" +\n        \"2. hold left button to preview point<br>\" +\n        \"3. right click to finish creating<br>\" +\n        \"4. hold ctrl to help with horizontal/vertical line<br>\";\n\n    private static readonly MAG_RADIUS = 10;\n\n    private map: Map;\n    private polylineNew: DrawablePolyline = null;\n    private layerView: LayerPolylineView;\n\n    public constructor(canvas: Canvas) {\n        super(Names.POLYLINE_CREATE, canvas);\n        Selection.register(Names.POLYLINE_CREATE, () => {\n            this.startCreatingPolyline();\n        }, () => {\n            this.finishEditing();\n        });\n    }\n\n    public loadMap(map: Map): void {\n        this.map = map;\n    }\n\n    public loadData(data: Data): void {\n        this.layerView = this.canvas.findLayer(Names.POLYLINE_VIEW) as LayerPolylineView;\n        this.polylineNew = null;\n        this.finishEditing();\n        Ui.setVisibility(\"panelPolylineSelected\", false);\n    }\n\n    public createPolylineAndEdit() {\n        this.polylineNew = new DrawablePolyline(new DrawablePolylinePack(\n            [], true, new Size(2),\n            true, \"white\", \"25\",\n            true, \"white\", \"75\",\n        ));\n\n        Selection.select(Names.POLYLINE_CREATE, this.polylineNew);\n    }\n\n    private startCreatingPolyline() {\n        let self = this;\n        this.bindPolylineConfigUi(this.polylineNew);\n\n        Ui.setContent(LayerPolylineCreate.HINT_ELEMENT_ID, LayerPolylineCreate.HINT_NEW_POLYLINE);\n\n        this._mouseListener = new class extends MouseListener {\n            private down: boolean = false;\n            private moved: boolean = false;\n\n            private preview(position: Position, magnetic: boolean): void {\n                self.polylineNew.editor.setPoint(-1, position.x, position.y);\n                if (magnetic) {\n                    let radius = self.camera.screenSizeToCanvas(LayerPolylineCreate.MAG_RADIUS);\n                    let result = self.polylineNew.calculator.alignPoint(-1, radius);\n                    self.polylineNew.editor.setPoint(-1, result.x, result.y);\n                }\n            }\n            onmousedown(event: MouseEvent): boolean {\n                if (event.button == 0 && !this.down) { //left button down => add point\n                    this.down = true;\n                    let position = self.camera.screenXyToCanvas(event.offsetX, event.offsetY);\n                    self.polylineNew.editor.addPoint(position.x, position.y);\n                    self.canvas.requestRender();\n                    return true;\n                } else if (event.button == 2) {\n                    this.moved = false;\n                }\n                return false;\n            }\n            onmouseup(event: MouseEvent): boolean {\n                if (event.button == 0) { //left button up => update last point\n                    this.down = false;\n                    let position = self.camera.screenXyToCanvas(event.offsetX, event.offsetY);\n                    this.preview(position, event.ctrlKey);\n                    self.canvas.requestRender();\n                    return true;\n                } else if (event.button == 2) {\n                    if (!this.moved) {\n                        let newPolyline = self.polylineNew;\n                        self.finishEditing();\n                        if (self.layerView.containPolyline(newPolyline)) {\n                            //pass it to polyline edit\n                            Selection.select(Names.POLYLINE_EDIT, newPolyline);\n                        }\n                    }\n                    this.moved = false;\n                    return true;\n                }\n                return false;\n            }\n            onmousemove(event: MouseEvent): boolean {\n                if (this.down) { //left button is down => show modification\n                    let position = self.camera.screenXyToCanvas(event.offsetX, event.offsetY);\n                    this.preview(position, event.ctrlKey);\n                    self.canvas.requestRender();\n                    return true;\n                } else if (event.buttons & 2) {\n                    this.moved = true;\n                }\n                return false;\n            }\n        };\n\n        return this.polylineNew;\n    }\n\n    public deleteCreating() {\n        this.polylineNew = null;\n        this.finishEditing();\n        this.canvas.requestRender();\n    }\n\n    public finishEditing(): void {\n        Ui.setVisibility(\"panelPolylineSelected\", false);\n\n        if (this.polylineNew) {\n            if (this.polylineNew.editor.pointCount() > 2) {\n                this.layerView.addPolyline(this.polylineNew);\n            }\n            this.polylineNew = null;\n            this.canvas.requestRender();\n        }\n        this._mouseListener = null;\n    }\n\n    public render(renderer: Renderer): void {\n        if (this.polylineNew) {\n            this.polylineNew.render(this.canvas, renderer, this.camera);\n            //draw two points\n            let pointCount = this.polylineNew.editor.pointCount();\n            if (pointCount > 0) {\n                let p = this.polylineNew.editor.getPoint(0);\n                this.drawPointCircle(p.x, p.y, renderer);\n            }\n            if (pointCount > 1) {\n                let p = this.polylineNew.editor.getPoint(-1);\n                this.drawPointCircle(p.x, p.y, renderer);\n            }\n        }\n    }\n\n    private drawPointCircle(x: number, y: number, renderer: Renderer) {\n        let position = this.camera.canvasToScreen(x, y);\n        renderer.setColor(\"rgba(255,255,255,1)\");\n        renderer.drawCircle(position.x, position.y, 5, false, true, 1);\n        renderer.setColor(\"rgba(0,0,0,0.5)\");\n        renderer.drawCircle(position.x, position.y, 4, true, false);\n    }\n\n    private bindPolylineConfigUi(polyline: DrawablePolyline) {\n        Ui.setVisibility(\"panelPolylineSelected\", true);\n\n        Ui.bindButtonOnClick(\"polylineButtonCopy\", () => {\n            let offset = this.canvas.getCamera().screenSizeToCanvas(20);\n            let newPolyline = new DrawablePolyline(polyline.clone(offset, offset));\n\n            this.finishEditing();\n            this.layerView.addPolyline(newPolyline);\n            Selection.select(\"polylinecreate\", newPolyline);\n\n            this.canvas.requestRender();\n        });\n\n        // Ui.setVisibility(\"polylineAreaContainer\", this.map.widthMillimeter > 0 && this.map.heightMillimeter > 0);\n        Ui.bindButtonOnClick(\"polylineButtonArea\", () => {\n            Ui.setContent(\"polylineTextArea\", \"\");\n            if (polyline.style.fill) {\n                let width = this.map.widthMillimeter;\n                let height = this.map.heightMillimeter;\n                let unit = \"mm^2\";\n                if (!(this.map.widthMillimeter > 0 && this.map.heightMillimeter > 0)) {\n                    width = this.map.width;\n                    height = this.map.height;\n                    unit = \"pixels\"\n                }\n\n                let area = polyline.calculator.area();\n                let areaMM2 = area / this.map.width / this.map.height * width * height;\n                areaMM2 = Math.round(areaMM2 * 100) / 100;\n                Ui.setContent(\"polylineTextArea\", areaMM2 + unit);\n            } else {\n                let width = this.map.widthMillimeter;\n                let height = this.map.heightMillimeter;\n                let unit = \"mm\";\n                if (!(this.map.widthMillimeter > 0 && this.map.heightMillimeter > 0)) {\n                    width = this.map.width;\n                    height = this.map.height;\n                    unit = \"pixels\"\n                }\n\n                let length = polyline.calculator.length();\n                let lengthMM = length * Math.sqrt(width * height / this.map.width / this.map.height);\n                lengthMM = Math.round(lengthMM * 100) / 100;\n                Ui.setContent(\"polylineTextArea\", lengthMM + unit);\n            }\n        });\n        Ui.setContent(\"polylineTextArea\", \"\");\n\n        Ui.bindButtonOnClick(\"polylineButtonRotateCCW\", () => {\n            polyline.editor.rotateCCW();\n            this.canvas.requestRender();\n        });\n        Ui.bindButtonOnClick(\"polylineButtonRotateCW\", () => {\n            polyline.editor.rotateCW();\n            this.canvas.requestRender();\n        });\n        Ui.bindButtonOnClick(\"polylineButtonFlipX\", () => {\n            polyline.editor.flipX();\n            this.canvas.requestRender();\n        });\n        Ui.bindButtonOnClick(\"polylineButtonFlipY\", () => {\n            polyline.editor.flipY();\n            this.canvas.requestRender();\n        });\n\n\n        Ui.bindCheckbox(\"polylineCheckboxFill\", polyline.style.fill, newValue => {\n            polyline.style.fill = newValue;\n            this.canvas.requestRender();\n        });\n        Ui.bindCheckbox(\"polylineCheckboxStroke\", polyline.style.stroke, newValue => {\n            polyline.style.stroke = newValue;\n            this.canvas.requestRender();\n        });\n        Ui.bindCheckbox(\"polylineCheckboxClosed\", polyline.style.closed, newValue => {\n            polyline.style.closed = newValue;\n            this.canvas.requestRender();\n        });\n\n        Ui.bindNumber(\"polylineTextSizeOnScreen\", polyline.style.onScreen, newValue => {\n            polyline.style.onScreen = newValue;\n            this.canvas.requestRender();\n        });\n        Ui.bindNumber(\"polylineTextSizeOnCanvas\", polyline.style.onCanvas, newValue => {\n            polyline.style.onCanvas = newValue;\n            this.canvas.requestRender();\n        });\n        Ui.bindNumber(\"polylineTextSizeOfScreen\", polyline.style.ofScreen * 1000, newValue => {\n            polyline.style.ofScreen = newValue * 0.001;\n            this.canvas.requestRender();\n        });\n\n        Ui.bindColor(\"polylineContainerStrokeColor\", \"polylineContainerStrokeAlpha\", polyline.style.strokeColor, polyline.style.strokeAlpha, (newColor, newAlpha) => {\n            polyline.style.setStrokeColor(newColor, newAlpha);\n            this.canvas.requestRender();\n        });\n        Ui.bindColor(\"polylineContainerFillColor\", \"polylineContainerFillAlpha\", polyline.style.fillColor, polyline.style.fillAlpha, (newColor, newAlpha) => {\n            polyline.style.setFillColor(newColor, newAlpha);\n            this.canvas.requestRender();\n        });\n    }\n}\n","import {Layer} from \"../Layer\";\nimport {DrawableText, DrawableTextPack} from \"../drawable/DrawableText\";\nimport {Canvas} from \"../Canvas\";\nimport {Size} from \"../util/Size\";\nimport {MouseListener} from \"../MouseListener\";\nimport {Renderer} from \"../Renderer\";\nimport {LayerTextView} from \"./LayerTextView\";\nimport {Ui} from \"../util/Ui\";\nimport {Data} from \"../data/Data\";\nimport {Selection} from \"./Selection\";\nimport {Drawable} from \"../drawable/Drawable\";\nimport {Names} from \"./Names\";\n\nexport class LayerTextCreate extends Layer {\n\n    private static readonly HINT_ELEMENT_ID = \"hint\";\n    private static readonly HINT_NEW_TEXT =\n        \"1. left click to create text<br>\";\n\n    private textNew: DrawableText;\n    private layerView: LayerTextView;\n\n    public constructor(canvas: Canvas) {\n        super(Names.TEXT_CREATE, canvas);\n        Selection.register(Names.TEXT_CREATE, (item: Drawable) => {\n            this.startCreatingText();\n        }, () => {\n            this.finishCreating();\n        });\n    }\n\n    public loadData(data: Data): void {\n        this.layerView = this.canvas.findLayer(Names.TEXT_VIEW) as LayerTextView;\n        this.finishCreating();\n        Ui.setVisibility(\"panelTextSelected\", false);\n    }\n\n    public createTextAndEdit() {\n        //show text and its point indicators\n        this.textNew = new DrawableText(new DrawableTextPack(\n            \"text\",\n            \"white\", \"100\", new Size(20, 50),\n            0, 0\n        ));\n        Selection.select(Names.TEXT_CREATE, this.textNew);\n    }\n\n    private startCreatingText() {\n        this.finishCreating();\n        let self = this;\n        this.bindTextConfigUi(this.textNew);\n\n        Ui.setContent(LayerTextCreate.HINT_ELEMENT_ID, LayerTextCreate.HINT_NEW_TEXT);\n\n        this._mouseListener = new class extends MouseListener {\n            private down: boolean = false;\n\n            onmousedown(event: MouseEvent): boolean {\n                if (event.button == 0) {\n                    this.down = true;\n                    return true;\n                }\n                return false;\n            }\n            onmouseup(event: MouseEvent): boolean {\n                if (event.button == 0) { //left button up => update last point\n                    this.down = false;\n                    let position = self.camera.screenXyToCanvas(event.offsetX, event.offsetY);\n                    self.textNew.setPosition(position.x, position.y);\n                    self.layerView.addText(self.textNew);\n                    Selection.select(Names.TEXT_EDIT, self.textNew);\n                    self.canvas.requestRender();\n                    return true;\n                } else {\n                    return false;\n                }\n            }\n            onmousemove(event: MouseEvent): boolean {\n                return (event.buttons & 1) && this.down;\n\n            }\n        };\n    }\n\n    public finishCreating(): void {\n        Ui.setVisibility(\"panelTextSelected\", false);\n\n        this._mouseListener = null;\n    }\n\n    public render(renderer: Renderer): void {\n\n    }\n\n    public deleteCreating() {\n        if (this.textNew) {\n            this.layerView.deleteText(this.textNew);\n            this.textNew = null;\n            this.finishCreating();\n        }\n    }\n\n    private bindTextConfigUi(text: DrawableText) {\n        Ui.setVisibility(\"panelTextSelected\", true);\n\n        Ui.bindButtonOnClick(\"textButtonCopy\", () => {\n        });\n\n        Ui.bindValue(\"textTextContent\", text.text, newValue => {\n            text.text = newValue;\n            this.canvas.requestRender();\n        });\n\n        Ui.bindNumber(\"textTextSizeOnScreen\", text.onScreen, newValue => {\n            text.onScreen = newValue;\n            this.canvas.requestRender();\n        });\n        Ui.bindNumber(\"textTextSizeOnCanvas\", text.onCanvas, newValue => {\n            text.onCanvas = newValue;\n            this.canvas.requestRender();\n        });\n        Ui.bindNumber(\"textTextSizeOfScreen\", text.ofScreen * 1000, newValue => {\n            text.ofScreen = newValue * 0.001;\n            this.canvas.requestRender();\n        });\n\n        Ui.bindColor(\"textContainerColor\", \"textContainerAlpha\", text.color, text.alpha, (newColor, newAlpha) => {\n            text.setColorAlpha(newColor, newAlpha);\n            this.canvas.requestRender();\n        });\n    }\n}\n","import {Canvas} from \"./Canvas\";\nimport {NetUtil} from \"./util/NetUtil\";\nimport {Map} from \"./data/Map\";\nimport {LayerImage} from \"./layers/LayerImage\";\nimport {LayerPolylineView} from \"./layers/LayerPolylineView\";\nimport {LayerPolylineEdit} from \"./layers/LayerPolylineEdit\";\nimport {Data} from \"./data/Data\";\nimport {Ui} from \"./util/Ui\";\nimport {LayerTextEdit} from \"./layers/LayerTextEdit\";\nimport {LayerTextView} from \"./layers/LayerTextView\";\nimport {Github, GithubComment} from \"./util/GithubUtil\";\nimport {LayerPolylineCreate} from \"./layers/LayerPolylineCreate\";\nimport {LayerTextCreate} from \"./layers/LayerTextCreate\";\n\nif (Ui.isMobile()) {\n    document.getElementById(\"panel\").style.display = \"none\";\n} else {\n    document.getElementById(\"panel\").style.display = \"block\";\n}\n\nlet canvas = new Canvas(document.getElementById(\"container\"), 'canvas2d');\ncanvas.init();\n\nlet layerImage = new LayerImage(canvas);\nlet layerPolylineView = new LayerPolylineView(canvas);\nlet layerPolylineCreate = new LayerPolylineCreate(canvas);\nlet layerPolylineEdit = new LayerPolylineEdit(canvas);\nlet layerTextView = new LayerTextView(canvas);\nlet layerTextCreate = new LayerTextCreate(canvas);\nlet layerTextEdit = new LayerTextEdit(canvas);\n\ncanvas.addLayer(layerImage);\ncanvas.addLayer(layerPolylineView);\ncanvas.addLayer(layerPolylineEdit);\ncanvas.addLayer(layerPolylineCreate);\ncanvas.addLayer(layerTextView);\ncanvas.addLayer(layerTextEdit);\ncanvas.addLayer(layerTextCreate);\n\nUi.bindButtonOnClick(\"buttonNewPolyline\", () => {\n    layerTextEdit.finishEditing();\n    layerPolylineCreate.createPolylineAndEdit();\n});\nUi.bindButtonOnClick(\"polylineButtonDelete\", () => {\n    layerPolylineEdit.deleteEditing();\n    layerPolylineCreate.deleteCreating();\n    layerTextEdit.finishEditing();\n    layerPolylineEdit.finishEditing();\n});\nUi.bindButtonOnClick(\"buttonNewText\", () => {\n    layerPolylineEdit.finishEditing();\n    layerTextCreate.createTextAndEdit()\n});\nUi.bindButtonOnClick(\"textButtonDelete\", () => {\n    layerPolylineEdit.finishEditing();\n    layerTextCreate.deleteCreating();\n    layerTextCreate.finishCreating();\n    layerTextEdit.deleteEditing();\n    layerTextEdit.finishEditing();\n});\n\nclass App {\n    currentMapName: string = null;\n    issueLink = \"\";\n    currentCommentId: number = 0;\n    dummyData: Data = null;\n\n    public start() {\n        NetUtil.get(\"https://misdake.github.io/ChipAnnotationData/list.txt\", text => {\n\n            let defaultMap: string = null;\n            let lines: string[] = [];\n            let maps: { [key: string]: string } = {};\n            let names: string[] = [];\n\n            if (text && text.length) {\n                lines = text.split(\"\\n\").filter(value => value.length > 0).map(value => value.trim());\n                for (let line of lines) {\n                    let name = line.substring(line.lastIndexOf('/') + 1);\n                    names.push(name);\n                    maps[name] = line;\n                }\n                if (lines.length > 0) {\n                    defaultMap = names[0];\n                }\n            }\n\n            if (!defaultMap) defaultMap = \"Fiji\";\n\n            let url_string = window.location.href;\n            let url = new URL(url_string);\n            let mapName = url.searchParams.get(\"map\") || defaultMap;\n            let commentIdString = url.searchParams.get(\"commentId\") || \"0\";\n            this.currentCommentId = parseInt(commentIdString);\n\n            Ui.bindSelect(\"mapSelect\", names, mapName, (index, newMap) => {\n                this.currentCommentId = 0;\n                this.loadMap(newMap, maps[newMap]);\n                this.replaceUrl();\n            });\n\n            this.loadMap(mapName, maps[mapName]);\n\n        });\n    }\n\n    loadMap(mapName: string, mapString: string) {\n        this.currentMapName = mapName;\n\n        NetUtil.get(mapString + \"/content.json\", mapDesc => {\n            let map: Map = JSON.parse(mapDesc) as Map;\n            canvas.loadMap(map);\n            canvas.requestRender();\n\n            this.issueLink = Github.getIssueLink(map.githubRepo, map.githubIssueId);\n\n            Ui.bindButtonOnClick(\"buttonSave\", () => {\n                layerTextEdit.finishEditing();\n                layerPolylineEdit.finishEditing();\n\n                let data = canvas.save();\n                data.title = (document.getElementById(\"dataTitle\") as HTMLInputElement).value;\n                if (data.title == null || data.title == \"\") {\n                    data.title = \"untitled\";\n                }\n\n                let dataString = JSON.stringify(data);\n                Ui.bindValue(\"dataOutput\", dataString, newValue => {\n                });\n                Ui.copyToClipboard(\"dataOutput\");\n                Ui.bindValue(\"dataOutput\", \"\", newValue => {\n                });\n\n                if (this.issueLink) {\n                    window.open(this.issueLink, '_blank');\n                }\n            });\n\n            Ui.bindValue(\"dataOutput\", \"\", newValue => {\n            });\n            Ui.bindValue(\"dataTitle\", \"\", newValue => {\n            });\n            Ui.bindSelect(\"dataSelect\", [], null, index => {\n            });\n\n            this.dummyData = new Data();\n            this.dummyData.title = \"\";\n            canvas.loadData(this.dummyData);\n\n            Ui.bindValue(\"dataOutput\", \"\", newValue => {\n            });\n\n            this.loadGithubComment(map, this.currentCommentId);\n\n            Ui.bindButtonOnClick(\"buttonRefreshData\", () => {\n                this.loadGithubComment(map, this.currentCommentId);\n            });\n        });\n    }\n\n    loadGithubComment(map: Map, commentId: number) {\n        if (map.githubRepo && map.githubIssueId) {\n            Github.getComments(map.githubRepo, map.githubIssueId, comments => {\n                let list: GithubComment[] = [];\n                let entries: Data[] = [];\n                let items: string[] = [];\n\n                list.push(null);\n                entries.push(this.dummyData);\n                items.push(\"(empty)\");\n\n                let startIndex = 0;\n                let startData = this.dummyData;\n                let startCommentId = 0;\n\n                for (let comment of comments) {\n                    try {\n                        let data: Data = JSON.parse(comment.body);\n                        if (data.polylines != null && data.texts != null) {\n                            if (data.title == null || data.title == \"\") {\n                                data.title = \"untitled\";\n                            }\n                            list.push(comment);\n                            entries.push(data);\n                            items.push(data.title + \" @\" + comment.user.login);\n                            if (commentId == comment.id) {\n                                startIndex = list.length - 1;\n                                startData = data;\n                                startCommentId = comment.id;\n                            }\n                        }\n                    } catch (e) {\n                    }\n                }\n\n                Ui.bindSelect(\"dataSelect\", items, items[startIndex], index => {\n                    let comment = list[index];\n                    let data = entries[index];\n                    this.loadData(map, data, comment ? comment.id : 0);\n                });\n\n                this.loadData(map, startData, startCommentId);\n            });\n        }\n    }\n\n    loadData(map: Map, data: Data, commentId: number) {\n        Ui.bindValue(\"dataTitle\", data.title, newValue => {\n        });\n\n        this.currentCommentId = commentId;\n\n        if (commentId > 0) {\n            this.issueLink = Github.getCommentLink(map.githubRepo, map.githubIssueId, commentId);\n        } else {\n            this.issueLink = Github.getIssueLink(map.githubRepo, map.githubIssueId);\n        }\n\n        Ui.bindValue(\"dataOutput\", \"\", newValue => {\n        });\n\n        canvas.loadData(data);\n        this.replaceUrl();\n        canvas.requestRender();\n    }\n\n    replaceUrl() {\n        let url = location.pathname + '?map=' + this.currentMapName;\n        if (this.currentCommentId > 0) url += '&commentId=' + this.currentCommentId;\n        history.replaceState(null, \"\", url);\n    }\n}\n\nnew App().start();\n"],"names":["tslib_1.__extends"],"mappings":"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"}